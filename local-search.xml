<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ä½ å¥½ï¼Œæˆ‘çš„ä¸ªäººä»‹ç»ï¼Ÿ</title>
    <link href="/pingpinghome/2025/08/20/hello-world/"/>
    <url>/pingpinghome/2025/08/20/hello-world/</url>
    
    <content type="html"><![CDATA[<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸ªäººåšå®¢ï¼Œæœ¬åšå®¢ä¸»è¦ç”¨äºä¸ªäººå­¦ä¹ å’Œç¬”è®°å±•ç¤ºï¼Œæ–¹ä¾¿æµè§ˆä¸€è·¯èµ°è¿‡æ¥çš„ç‚¹ç‚¹æ»´æ»´ï¼Œå¦‚æœä½ æœ‰å…´è¶£å’Œæˆ‘äº¤æµï¼Œè¯·åœ¨githubä¸­æœç´¢pink-pigpigç»™æˆ‘ç•™è¨€ã€‚é¡ºä¾¿æµ‹è¯•ä¸€ä¸‹é“¾æ¥<a href="https://github.com/pink-pigpig">æˆ‘çš„github</a></p><h2 id="ç®€å•è¯´ä¸€äº›">ç®€å•è¯´ä¸€äº›</h2><h3 id="ä¸€äº›ç¢ç¢å¿µ">ä¸€äº›ç¢ç¢å¿µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">æµ‹è¯•ä¸€ä¸‹ä»£ç å—æ˜¯ä¸æ˜¯æœ‰é«˜äº®æ˜¾ç¤ºliang<br></code></pre></td></tr></table></figure><h3 id="ç›®å‰å®‰æ’">ç›®å‰å®‰æ’</h3><ul><li>[x] å‰ç«¯vue3</li><li>[x] åç«¯springBoot</li><li>[x] å­¦ä¹ å‰ç«¯ç›¸å…³ç»„ä»¶â€”â€”routerã€vue3ã€vuexã€axiosã€element</li><li>[x] å­¦ä¹ åç«¯ç›¸å…³ç»„ä»¶â€”â€”springBootã€mybatisã€jwtã€redisã€</li><li>[x] è¯­è¨€ï¼šjavaã€javascriptã€htmlã€cssã€sqlã€TypeScriptã€mysqlã€å¾®ä¿¡å°ç¨‹åº</li><li>[ ] ç›®å‰å…¶ä»–æƒ³è¦å­¦ä¹ çš„ä¸œè¥¿ï¼šjpaï¼ˆå¬è¯´å’Œrediså·®ä¸å¤šï¼Œä¸”çœ‹ï¼‰</li><li>[ ] å­¦ä¹ æ–¹å‘ï¼šaiæ–¹å‘çš„è‡ªåŠ¨åŒ–å¼€å‘æµçº¿ï¼ˆæœªæ¥è§¦ï¼Œå…ˆå†™ç€ã€‚ï¼‰</li></ul><h3 id="ç›®å‰çš„é¡¹ç›®">ç›®å‰çš„é¡¹ç›®</h3><h4 id="èµ›è¯ºå…¬å¸â€”â€”è®¿å®¢ç®¡ç†ç³»ç»Ÿ">èµ›è¯ºå…¬å¸â€”â€”è®¿å®¢ç®¡ç†ç³»ç»Ÿ</h4><ul><li>vue3ï¼ŒspringBootï¼Œmybatisï¼Œjwtï¼Œredisï¼Œelementï¼Œaxiosï¼Œossï¼Œtypescriptï¼Œmysqlç­‰</li></ul><blockquote><p>ä¸€æ¬¾ç”±èµ›è¯ºå…¬å¸ç‰µå¤´ï¼Œæä¾›éœ€æ±‚æ–‡æ¡£ï¼Œä»é›¶å¼€å§‹å¼€å‘çš„é¡¹ç›®ã€‚é¡¹ç›®æ¶‰åŠè½¯ç¡¬ä»¶ç®¡ç†ï¼Œå‰åç«¯å¼€å‘ï¼Œæ—¨åœ¨å…¨é¢è€ƒå¯Ÿä¸ªäººå¼€å‘èƒ½åŠ›ã€‚<br>è¿™ä¸ªé¡¹ç›®æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å…¨æ ˆå¼€å‘çš„æµ‹è¯•ï¼Œç‹¬è‡ªå®Œæˆå‰åç«¯çš„æ‰€æœ‰å¼€å‘ï¼Œè™½ç„¶é¡¹ç›®ä¸å¤§ï¼Œä½†ä¸€æ•´å¥—æµç¨‹ä¸‹æ¥ï¼Œå¯¹å¾ˆå¤šä¸œè¥¿éƒ½æœ‰äº†æ„Ÿæ‚Ÿï¼Œæ¯”å¦‚ï¼Œä¸ºä»€ä¹ˆéœ€è¦å‰åç«¯çš„æ¥å£æ–‡æ¡£ã€æ•°æ®åº“è®¾è®¡ã€æŠ€æœ¯é€‰å‹ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å¼€å‘è§„èŒƒï¼Ÿä»¥åŠä¸ºä»€ä¹ˆå‰åç«¯éœ€è¦æ²Ÿé€šæ‰å¯ä»¥é¡ºåˆ©æ¨è¿›é¡¹ç›®ç­‰ã€‚å¾ˆå¤šä¸œè¥¿ï¼Œåªæœ‰è‡ªå·±å®Œå…¨å»æ¥è§¦åæ‰ä¼šæœ‰æ‰€ç†è§£ã€‚</p><blockquote><p>ç‰¹åˆ«æ„Ÿè°¢æˆ‘è¿™ä¸ªé¡¹ç›®çš„æ­æ¡£ï¼Œé™ªæˆ‘ä¸€èµ·ä½“ä¼šï¼Œä¸€äººå‰ç«¯ä¸€äººåç«¯ï¼Œæ¨¡æ‹Ÿæ•´ä¸ªå¼€å‘çš„æµç¨‹ã€‚</p></blockquote></blockquote><hr><ol><li>ä»é›¶è‡ªä¸»æ­å»ºé¡¹ç›®ï¼Œè¿ç”¨vue3åŠ elementæ¥å®ç°å‰ç«¯é¡µé¢çš„å±•ç¤ºï¼Œè¿ç”¨SpringBootå¿«é€Ÿå¼€å‘åç«¯ã€‚</li><li>ä»é›¶å¼€å§‹è®¾è®¡éœ€æ±‚æ–‡æ¡£ï¼Œé¡¹ç›®æ¥å£æ–‡æ¡£ï¼Œæ•°æ®åº“è¡¨è®¾è®¡ï¼Œæ ¹æ®æ–‡æ¡£å¼€å‘ç­‰ï¼Œç†Ÿæ‚‰é¡¹ç›®å¼€å‘æµç¨‹ï¼Œå¯¹å¼€å‘æµç¨‹æœ‰æ·±åˆ»ç†è§£ã€‚</li><li>å‰ç«¯åˆ©ç”¨axiosä¸nodejsæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚å’ŒæœåŠ¡ä»£ç†ï¼Œè¿ç”¨elementå®ç°å›¾åƒå±•ç¤ºï¼Œæ–‡ä»¶ä¸Šä¼ ç­‰åŠŸèƒ½ã€‚è¿ç”¨vueå’Œtsè¯­è¨€æ¥æ›´å¥½çš„å®ç°å¯¹åº”çš„åŠŸèƒ½ã€‚</li><li>åç«¯è¿ç”¨jwtæ¥è¿›è¡Œæ‹¦æˆªï¼Œå®ç°ç”¨æˆ·é‰´æƒï¼Œé€šè¿‡å¯¹tokençš„éªŒè¯æ¥é˜²æ­¢æœªæˆæƒè®¿é—®</li><li>è¿ç”¨aopæ¥è¿›è¡Œåˆ‡é¢ç±»å¼€å‘ï¼Œå®ç°å¯¹é€šç”¨å­—æ®µçš„è‡ªåŠ¨å¡«å†™ï¼Œå’Œå¯¹æ¥å£çš„å¤„ç†æ—¶é—´ç»Ÿè®¡ã€‚é€šè¿‡redisæ¥å¯¹ä¸€äº›é¢‘ç¹è®¿é—®çš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œå‡å°‘å¯¹æ•°æ®åº“çš„å‹åŠ›ï¼ŒåŒæ—¶å¯¹éªŒè¯ç è¿™ç±»æ—¶æ•ˆæ€§ä¿¡æ¯è®¾è®¡è¿‡æœŸæ—¶é—´ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§</li><li>è¿ç”¨MyBatiså¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œå®ç°æ•°æ®å­˜å‚¨åŠŸèƒ½ã€‚</li></ol><hr><h4 id="ç²‰çŒªåšå®¢">ç²‰çŒªåšå®¢</h4><ul><li>Vueã€axiosã€ElementUIã€vue-echartsã€mavon-editorã€vue-routerã€SpringBootã€SpringSecurityã€MyBatisã€éƒ¨åˆ†æ¥å£éµå¾ªRestfulé£æ ¼ã€MySQL</li></ul><blockquote><p>è¿™ä¸ªé¡¹ç›®æ˜¯æˆ‘ä¸€ç›´ä»¥æ¥æƒ³åšçš„ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¾ˆé€‚åˆæˆ‘å¼€å§‹çš„é¡¹ç›®ï¼Œå¯ä»¥è®°å½•è‡ªå·±ä¸€è·¯å­¦ä¹ çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥åˆ†äº«ä¸€äº›è‡ªå·±çš„äº‹ï¼Œé¡ºä¾¿å­¦ä¹ ä¸€ä¸‹æ–°çš„æŠ€æœ¯å’Œå¼€å‘æ–¹å¼ã€‚</p></blockquote><p>1.å¯¹ä¸è¿™ä¸ªé¡¹ç›®æˆ‘æƒ³å¤§å®¶è§æ€ªä¸æ€ªäº†ï¼Œvueå’Œspringbootéƒ½æ˜¯å¾ˆç†Ÿæ‚‰çš„ä¸œè¥¿ï¼Œæ‰€ä»¥å­¦ä¹ èµ·æ¥å¾ˆç®€å•ã€‚<br>2.è¿™æ¬¡å­¦ä¹ ä¸»è¦æ˜¯åœ¨éƒ¨ç½²å’Œæ€ä¹ˆæŠŠç½‘é¡µæ‰˜ç®¡ä¸Šï¼Œæˆ‘ç”¨çš„æ˜¯gitpageï¼Œå’Œhexoæ¥è¿›è¡Œæ­å»ºï¼Œæ‰€ä»¥è¿‡ç¨‹å¾ˆé¡ºåˆ©ã€‚<br>3.å­¦ä¹ ç”¨SpringSecurityæ¥è¿›è¡Œè®¤è¯ï¼Œå­¦ä¹ ç”¨jpaæ¥è¿›è¡Œæ•°æ®åº“æ“ä½œã€‚ä¸€æ–¹é¢æ˜¯ä¹‹å‰å­¦çš„jwtæœ‰ç‚¹åŒºåˆ«ï¼Œå¦ä¸€æ–¹é¢mybatiså’Œjpaçš„ç”¨æ³•ä¹Ÿä¸€æ ·ï¼Œæ‰€ä»¥å­¦ä¹ èµ·æ¥å¾ˆè½»æ¾ã€‚ä¸¤è€…æ€æƒ³æœ‰æ‰€åŒºåˆ«ï¼Œä½†æ˜¯å¾ˆç›¸ä¼¼ã€‚<br>4.è¿™ä¸ªé¡¹ç›®è¾¹åšè¾¹å­¦ï¼Œæ—¥åä¼šæˆä¸ºä¸ªäººç¬”è®°å’Œè¡¥å……ï¼Œåé¢æ·»åŠ æ–°çš„é¡¹ç›®ä¹Ÿä¼šåœ¨è¿™é‡Œæä¸€ä¸‹ã€‚</p><h3 id="å­¦ä¹ è·¯ç¨‹">å­¦ä¹ è·¯ç¨‹</h3>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>HttpClientå­¦ä¹ ä¸ä½¿ç”¨</title>
    <link href="/pingpinghome/2025/08/12/HttpClient%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/pingpinghome/2025/08/12/HttpClient%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1>HttpClient</h1><h2 id="ä¸€ã€ç®€å•å…¥é—¨">ä¸€ã€ç®€å•å…¥é—¨</h2><h3 id="1ã€ä»‹ç»">1ã€ä»‹ç»</h3><p>HttpClient æ˜¯Apache Jakarta Common ä¸‹çš„å­é¡¹ç›®ï¼Œå¯ä»¥ç”¨æ¥æä¾›é«˜æ•ˆçš„ã€æœ€æ–°çš„ã€åŠŸèƒ½ä¸°å¯Œçš„æ”¯æŒ HTTP åè®®çš„å®¢æˆ·ç«¯ç¼–ç¨‹å·¥å…·åŒ…ï¼Œå¹¶ä¸”å®ƒæ”¯æŒ HTTP åè®®æœ€æ–°çš„ç‰ˆæœ¬å’Œå»ºè®®ã€‚</p><p><strong>HttpClientä½œç”¨ï¼š</strong></p><ul><li><p>å‘é€HTTPè¯·æ±‚</p></li><li><p>æ¥æ”¶å“åº”æ•°æ®</p></li></ul><p>â“ä¸ºä»€ä¹ˆè¦åœ¨Javaç¨‹åºä¸­å‘é€Httpè¯·æ±‚ï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯å‘¢ï¼Ÿ</p><p><strong>HttpClientåº”ç”¨åœºæ™¯ï¼š</strong></p><p>âœ… å½“æˆ‘ä»¬åœ¨ä½¿ç”¨æ‰«ææ”¯ä»˜ã€æŸ¥çœ‹åœ°å›¾ã€è·å–éªŒè¯ç ã€æŸ¥çœ‹å¤©æ°”ç­‰åŠŸèƒ½æ—¶</p><p>å…¶å®ï¼Œåº”ç”¨ç¨‹åºæœ¬èº«å¹¶æœªå®ç°è¿™äº›åŠŸèƒ½ï¼Œéƒ½æ˜¯åœ¨åº”ç”¨ç¨‹åºé‡Œè®¿é—®æä¾›è¿™äº›åŠŸèƒ½çš„æœåŠ¡ï¼Œè®¿é—®è¿™äº›æœåŠ¡éœ€è¦å‘é€HTTPè¯·æ±‚ï¼Œå¹¶ä¸”æ¥æ”¶å“åº”æ•°æ®ï¼Œå¯é€šè¿‡HttpClientæ¥å®ç°ã€‚</p><p><strong>HttpClientçš„mavenåæ ‡ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>httpclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>HttpClientçš„æ ¸å¿ƒAPIï¼š</strong></p><ul><li>HttpClientï¼šHttpå®¢æˆ·ç«¯å¯¹è±¡ç±»å‹ï¼Œä½¿ç”¨è¯¥ç±»å‹å¯¹è±¡å¯å‘èµ·Httpè¯·æ±‚ã€‚</li><li>HttpClientsï¼šå¯è®¤ä¸ºæ˜¯æ„å»ºå™¨ï¼Œå¯åˆ›å»ºHttpClientå¯¹è±¡ã€‚</li><li>CloseableHttpClientï¼šå®ç°ç±»ï¼Œå®ç°äº†HttpClientæ¥å£ã€‚</li><li>HttpGetï¼šGetæ–¹å¼è¯·æ±‚ç±»å‹ã€‚</li><li>HttpPostï¼šPostæ–¹å¼è¯·æ±‚ç±»å‹ã€‚</li></ul><p><strong>HttpClientå‘é€è¯·æ±‚æ­¥éª¤ï¼š</strong></p><ul><li>åˆ›å»ºHttpClientå¯¹è±¡</li><li>åˆ›å»ºHttpè¯·æ±‚å¯¹è±¡</li><li>è°ƒç”¨HttpClientçš„executeæ–¹æ³•å‘é€è¯·æ±‚</li></ul><h2 id="äºŒã€ä½¿ç”¨æ­¥éª¤">äºŒã€ä½¿ç”¨æ­¥éª¤</h2><h3 id="1-ç®€å•ä½¿ç”¨">1.ç®€å•ä½¿ç”¨</h3><ul><li>ç¬¬ä¸€æ­¥ï¼ŒHttpClientåˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼Œç”¨æ¥å‘èµ·httpè¯·æ±‚</li><li>ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºè¯·æ±‚å¯¹è±¡å¡«å…¥åœ°å€</li><li>ç¬¬ä¸‰æ­¥ï¼ŒHttpå‘é€è¯·æ±‚</li><li>ç¬¬å››æ­¥ï¼ŒHttpClientçš„executeæ¥æ”¶è¯·æ±‚</li><li>æœ€åï¼Œè®°å¾—å…³é—­ä½¿ç”¨çš„èµ„æº</li></ul><h3 id="2-å…¥é—¨æ¡ˆä¾‹">2.å…¥é—¨æ¡ˆä¾‹</h3><h4 id="2-1-getè¯·æ±‚">2.1 getè¯·æ±‚</h4><p>æ­£å¸¸æ¥è¯´ï¼Œé¦–å…ˆï¼Œåº”è¯¥å¯¼å…¥HttpClientç›¸å…³çš„åæ ‡ï¼Œä½†åœ¨é¡¹ç›®ä¸­ï¼Œå°±ç®—ä¸å¯¼å…¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç›¸å…³çš„APIã€‚</p><p>å› ä¸ºåœ¨é¡¹ç›®ä¸­å·²ç»å¼•å…¥äº†aliyun-sdk-ossåæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun.oss<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä¾èµ–çš„åº•å±‚å·²ç»åŒ…å«äº†HttpClientç›¸å…³ä¾èµ–ã€‚</p><p>å¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰ä½¿ç”¨ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªä¾èµ–ã€‚</p><p><strong>HttpClientçš„mavenåæ ‡ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>httpclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><ol><li>åˆ›å»ºHttpClientå¯¹è±¡</li><li>åˆ›å»ºè¯·æ±‚å¯¹è±¡</li><li>å‘é€è¯·æ±‚ï¼Œæ¥å—å“åº”ç»“æœ</li><li>è§£æç»“æœ</li><li>å…³é—­èµ„æº</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.sky.test;<br><br><span class="hljs-keyword">import</span> org.apache.http.HttpEntity;<br><span class="hljs-keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;<br><span class="hljs-keyword">import</span> org.apache.http.client.methods.HttpGet;<br><span class="hljs-keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;<br><span class="hljs-keyword">import</span> org.apache.http.impl.client.HttpClients;<br><span class="hljs-keyword">import</span> org.apache.http.util.EntityUtils;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpClientTest</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æµ‹è¯•é€šè¿‡httpclientå‘é€GETæ–¹å¼çš„è¯·æ±‚</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGET</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">//åˆ›å»ºhttpclientå¯¹è±¡</span><br>        <span class="hljs-type">CloseableHttpClient</span> <span class="hljs-variable">httpClient</span> <span class="hljs-operator">=</span> HttpClients.createDefault();<br><br>        <span class="hljs-comment">//åˆ›å»ºè¯·æ±‚å¯¹è±¡ http://localhost:8080/user/shop/status</span><br>        <span class="hljs-type">HttpGet</span> <span class="hljs-variable">httpGet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpGet</span>(<span class="hljs-string">&quot;è¯·æ±‚åœ°å€&quot;</span>);<br><br>        <span class="hljs-comment">//å‘é€è¯·æ±‚ï¼Œæ¥å—å“åº”ç»“æœ</span><br>        <span class="hljs-type">CloseableHttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> httpClient.execute(httpGet);<br><br>        <span class="hljs-comment">//è·å–æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç  200</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.getStatusLine().getStatusCode();<br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç ä¸ºï¼š&quot;</span> + statusCode);<br><br>        <span class="hljs-comment">//è·å–æœåŠ¡ç«¯æ”¾å›çš„æ•°æ®ä½“ &#123;&quot;code&quot;:1,&quot;msg&quot;,null,&quot;data&quot;:1&#125;</span><br>        <span class="hljs-type">HttpEntity</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> response.getEntity();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">body</span> <span class="hljs-operator">=</span> EntityUtils.toString(entity);<br>        System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ä¸ºï¼š&quot;</span> + body);<br><br>        <span class="hljs-comment">//å…³é—­èµ„æº</span><br>        response.close();<br>        httpClient.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-2-postè¯·æ±‚">2.2 postè¯·æ±‚</h4><p>åœ¨HttpClientTestä¸­æ·»åŠ POSTæ–¹å¼è¯·æ±‚æ–¹æ³•ï¼Œç›¸æ¯”GETè¯·æ±‚æ¥è¯´ï¼ŒPOSTè¯·æ±‚è‹¥æºå¸¦å‚æ•°éœ€è¦å°è£…è¯·æ±‚ä½“å¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡è®¾ç½®åœ¨è¯·æ±‚å¯¹è±¡ä¸­ã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><ol><li>åˆ›å»ºHttpClientå¯¹è±¡</li><li>åˆ›å»ºè¯·æ±‚å¯¹è±¡</li><li>å‘é€è¯·æ±‚ï¼Œæ¥æ”¶å“åº”ç»“æœ</li><li>è§£æå“åº”ç»“æœ</li><li>å…³é—­èµ„æº</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æµ‹è¯•é€šè¿‡httpclientå‘é€POSTæ–¹å¼çš„è¯·æ±‚</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPOST</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>       <span class="hljs-comment">// åˆ›å»ºhttpclientå¯¹è±¡</span><br>       <span class="hljs-type">CloseableHttpClient</span> <span class="hljs-variable">httpClient</span> <span class="hljs-operator">=</span> HttpClients.createDefault();<br><br>       <span class="hljs-comment">//åˆ›å»ºè¯·æ±‚å¯¹è±¡</span><br>       <span class="hljs-type">HttpPost</span> <span class="hljs-variable">httpPost</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpPost</span>(<span class="hljs-string">&quot;http://localhost:8080/admin/employee/login&quot;</span>);<br><br>       <span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsonObject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();<br>       jsonObject.put(<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&quot;admin&quot;</span>);<br>       jsonObject.put(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>);<br><br>       <span class="hljs-type">StringEntity</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringEntity</span>(jsonObject.toString());<br>       <span class="hljs-comment">//æŒ‡å®šè¯·æ±‚ç¼–ç æ–¹å¼</span><br>       entity.setContentEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>       <span class="hljs-comment">//æ•°æ®æ ¼å¼</span><br>       entity.setContentType(<span class="hljs-string">&quot;application/json&quot;</span>);<br>       httpPost.setEntity(entity);<br><br>       <span class="hljs-comment">//å‘é€è¯·æ±‚</span><br>       <span class="hljs-type">CloseableHttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> httpClient.execute(httpPost);<br><br>       <span class="hljs-comment">//è§£æè¿”å›ç»“æœ</span><br>       <span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.getStatusLine().getStatusCode();<br>       System.out.println(<span class="hljs-string">&quot;å“åº”ç ä¸ºï¼š&quot;</span> + statusCode);<br><br>       <span class="hljs-type">HttpEntity</span> <span class="hljs-variable">entity1</span> <span class="hljs-operator">=</span> response.getEntity();<br>       <span class="hljs-type">String</span> <span class="hljs-variable">body</span> <span class="hljs-operator">=</span> EntityUtils.toString(entity1);<br>       System.out.println(<span class="hljs-string">&quot;å“åº”æ•°æ®ä¸ºï¼š&quot;</span> + body);<br><br>       <span class="hljs-comment">//å…³é—­èµ„æº</span><br>       response.close();<br>       httpClient.close();<br>   &#125;<br></code></pre></td></tr></table></figure><p>httpclientçš„å…¥é—¨å¾ˆç®€å•ï¼Œä¹‹åçš„è¿›é˜¶ä½¿ç”¨ä¼šè¿›ä¸€æ­¥è¯´æ˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å…¥é—¨çŸ¥è¯†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å…¥é—¨çŸ¥è¯†</tag>
      
      <tag>HttpClient</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Redisçš„å­¦ä¹ ä¸ä½¿ç”¨</title>
    <link href="/pingpinghome/2025/08/12/Redis%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/pingpinghome/2025/08/12/Redis%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1>rediså­¦ä¹ ä¸ä½¿ç”¨</h1><h2 id="ä¸€ã€å…¥é—¨">ä¸€ã€å…¥é—¨</h2><h3 id="1-æ¦‚å¿µ">1.æ¦‚å¿µ</h3><p>redisæ˜¯ä¸€ç§æ•°æ®åº“ï¼Œä½†ä¸ä¸€èˆ¬çš„æ•°æ®åº“ä¸åŒï¼Œé‡‡ç”¨çš„æ˜¯é”®å€¼å¯¹æ¥è¿›è¡Œå­˜å‚¨ï¼Œä»–æ˜¯åœ¨å†…å­˜å½“ä¸­å·¥ä½œçš„ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚</p><ul><li>é€‚ç”¨äºåœ¨ä¸€äº›çƒ­ç‚¹æ•°æ®ä¸Šä½¿ç”¨ï¼Œå‡å°‘æ•°æ®åº“çš„å‹åŠ›</li><li>ä¼ä¸šç”¨çš„æ¯”è¾ƒå¤š</li><li>åŸºäºå†…å­˜å­˜å‚¨ï¼Œè¯»å†™æ€§èƒ½é«˜</li></ul><h3 id="2-redisçš„ä¸‹è½½å’Œå®‰è£…">2.redisçš„ä¸‹è½½å’Œå®‰è£…</h3><p>githubä¸‹è½½è¿æ¥<a href="https://github.com/redis-windows/redis-windows">redis-windows/redis-windows: Redis 6.0.20 6.2.18 7.0.15 7.2.8 7.4.3 8.0.0 for Windows â€” redis-windows/redis-windows: Redis 6.0.20 6.2.18 7.0.15 7.2.8 7.4.3 8.0.0 for Windows</a></p><p>å…¶ä»–æ•™ç¨‹<a href="https://blog.csdn.net/weixin_44893902/article/details/123087435">Windowä¸‹Redisçš„å®‰è£…å’Œéƒ¨ç½²è¯¦ç»†å›¾æ–‡æ•™ç¨‹ï¼ˆRedisçš„å®‰è£…å’Œå¯è§†åŒ–å·¥å…·çš„ä½¿ç”¨ï¼‰_rediså®‰è£…-CSDNåšå®¢</a></p><h3 id="3-éœ€è¦æ³¨æ„çš„å‡ ä¸ªæ–‡ä»¶">3.éœ€è¦æ³¨æ„çš„å‡ ä¸ªæ–‡ä»¶</h3><ul><li>confé…ç½®æ–‡ä»¶</li><li>cliè¿æ¥å®¢æˆ·ç«¯</li><li>serverå¯åŠ¨æœåŠ¡</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt;redis-cli<span class="hljs-selector-class">.exe</span> -h <span class="hljs-number">1</span>ocalhost -<span class="hljs-selector-tag">p</span> <span class="hljs-number">6379</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡æ­¤å‘½ä»¤æŒ‡å®šè¿æ¥çš„åœ°å€å’Œç«¯å£</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">redis</span>-cli.exe -h <span class="hljs-number">1</span>ocalhost -p6379-a <span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure><p>å¦‚æœè®¾ç½®äº†å¯†ç ï¼Œåˆ™éœ€è¦åœ¨åé¢æ·»åŠ -a å¯†ç </p><p>å¯†ç è®¾ç½®ç›´æ¥åœ¨confä¸Šä¿®æ”¹ï¼Œå…¶ä»–æ“ä½œç›´æ¥æŸ¥çœ‹å®˜æ–¹</p><p><a href="https://www.redis.net.cn/">Redisä¸­æ–‡ç½‘</a></p><h2 id="äºŒã€å¸¸ç”¨çš„ç”¨æ³•">äºŒã€å¸¸ç”¨çš„ç”¨æ³•</h2><h3 id="2-1rediså¸¸ç”¨æ•°æ®ç±»å‹">2.1rediså¸¸ç”¨æ•°æ®ç±»å‹</h3><ul><li><p>åˆ†ç±»</p><ul><li>å­—ç¬¦ä¸² string</li><li>å“ˆå¸Œ hash</li><li>åˆ—è¡¨ list</li><li>é›†åˆ set</li><li>æœ‰åºé›†åˆ sorted set / zset</li></ul></li><li><p>ç‰¹ç‚¹</p><ul><li>å­—ç¬¦ä¸²(string)ï¼šæ™®é€šå­—ç¬¦ä¸²ï¼ŒRedisä¸­æœ€ç®€å•çš„æ•°æ®ç±»å‹</li><li>å“ˆå¸Œ(hash)ï¼šä¹Ÿå«æ•£åˆ—ï¼Œç±»ä¼¼äºJavaä¸­çš„HashMapç»“æ„</li><li>åˆ—è¡¨(list)ï¼šæŒ‰ç…§æ’å…¥é¡ºåºæ’åºï¼Œå¯ä»¥<strong>æœ‰é‡å¤</strong>å…ƒç´ ï¼Œç±»ä¼¼äºJavaä¸­çš„LinkedList</li><li>é›†åˆ(set)ï¼šæ— åºé›†åˆï¼Œ<strong>æ²¡æœ‰é‡å¤å…ƒç´ </strong>ï¼Œç±»ä¼¼äºJavaä¸­çš„HashSet</li><li>æœ‰åºé›†åˆ(sorted set/zset)ï¼šé›†åˆä¸­æ¯ä¸ªå…ƒç´ å…³è”ä¸€ä¸ªåˆ†æ•°(score)ï¼Œæ ¹æ®åˆ†æ•°<strong>å‡åºæ’åºï¼Œæ²¡æœ‰é‡å¤å…ƒç´ </strong></li></ul></li></ul><h2 id="ä¸‰ã€Rediså¸¸ç”¨å‘½ä»¤">ä¸‰ã€Rediså¸¸ç”¨å‘½ä»¤</h2><h3 id="3-1å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤">3.1å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤</h3><p>Redis ä¸­å­—ç¬¦ä¸²ç±»å‹å¸¸ç”¨å‘½ä»¤ï¼š</p><table><thead><tr><th>å­—ç¬¦ä¸²ç±»å‹å¸¸ç”¨</th><th style="text-align:center"></th></tr></thead><tbody><tr><td><strong>SET</strong> key value</td><td style="text-align:center">è®¾ç½®æŒ‡å®škeyçš„å€¼</td></tr><tr><td><strong>GET</strong> key</td><td style="text-align:center">è·å–æŒ‡å®škeyçš„å€¼</td></tr><tr><td><strong>SETEX</strong> key seconds value</td><td style="text-align:center">è®¾ç½®æŒ‡å®škeyçš„å€¼ï¼Œå¹¶å°† key çš„è¿‡æœŸæ—¶é—´è®¾ä¸º seconds ç§’</td></tr><tr><td><strong>SETNX</strong> key value</td><td style="text-align:center">åªæœ‰åœ¨ key    ä¸å­˜åœ¨æ—¶è®¾ç½® key çš„å€¼</td></tr></tbody></table><p>æ›´å¤šå‘½ä»¤å¯ä»¥å‚è€ƒRedisä¸­æ–‡ç½‘ï¼š<a href="https://www.redis.net.cn">https://www.redis.net.cn</a></p><h3 id="3-2å“ˆå¸Œæ“ä½œå‘½ä»¤">3.2å“ˆå¸Œæ“ä½œå‘½ä»¤</h3><p>Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äº<strong>å­˜å‚¨å¯¹è±¡</strong>ï¼Œå¸¸ç”¨å‘½ä»¤ï¼š</p><p>ğŸ“–<strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼škeyæ˜¯è¡¨æ ¼ï¼Œfieldæ˜¯å­—æ®µï¼Œvalueæ˜¯å­—æ®µçš„å€¼ã€‚</p><table><thead><tr><th>å“ˆå¸Œç±»å‹å¸¸ç”¨å‘½ä»¤</th><th></th></tr></thead><tbody><tr><td><strong>HSET</strong> key field value</td><td>å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value</td></tr><tr><td><strong>HGET</strong> key field</td><td>è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼</td></tr><tr><td><strong>HDEL</strong> key field</td><td>åˆ é™¤å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­çš„æŒ‡å®šå­—æ®µ</td></tr><tr><td><strong>HKEYS</strong> key</td><td>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å­—æ®µ</td></tr><tr><td><strong>HVALS</strong> key</td><td>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼</td></tr></tbody></table><h3 id="3-3åˆ—è¡¨æ“ä½œå‘½ä»¤">3.3åˆ—è¡¨æ“ä½œå‘½ä»¤</h3><p>Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥<strong>é¡ºåºæ’åº</strong>ï¼Œå¸¸ç”¨å‘½ä»¤ï¼š</p><p>ğŸ“˜**ä¾‹å­ï¼š**æ’å…¥abcdï¼Œåˆ™åœ¨é˜Ÿåˆ—ä¸­ï¼Œæ˜¯dcbaã€‚aåœ¨å°¾éƒ¨ï¼Œdåœ¨å¤´éƒ¨ã€‚</p><table><thead><tr><th>åˆ—è¡¨æ“ä½œå‘½ä»¤</th><th></th></tr></thead><tbody><tr><td><strong>LPUSH</strong> key value1 [value2]</td><td>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨</td></tr><tr><td><strong>LRANGE</strong> key start stop</td><td>è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ </td></tr><tr><td><strong>RPOP</strong> key</td><td>ç§»é™¤å¹¶è·å–åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td><strong>LLEN</strong> key</td><td>è·å–åˆ—è¡¨é•¿åº¦</td></tr><tr><td><strong>BRPOP</strong> key1 [key2 ] timeout</td><td>ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…    æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢</td></tr></tbody></table><h3 id="3-4-é›†åˆæ“ä½œå‘½ä»¤">3.4 é›†åˆæ“ä½œå‘½ä»¤</h3><p>Redis set æ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæˆå‘˜æ˜¯<strong>å”¯ä¸€çš„</strong>ï¼Œè¿™å°±æ„å‘³ç€é›†åˆä¸­ ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®ï¼Œå¸¸ç”¨å‘½ä»¤ï¼š</p><p>ğŸ“– å¯ä»¥é€šè¿‡é›†åˆçš„ç‰¹æ€§æ¥è¿›è¡Œè¿ç®—ï¼Œæ¯”å¦‚äº¤é›†å¯ä»¥æ±‚å…±åŒæ•°æ®ã€‚</p><table><thead><tr><th>é›†åˆæ“ä½œå‘½ä»¤</th><th></th></tr></thead><tbody><tr><td><strong>SADD</strong> key member1 [member2]</td><td>å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr><tr><td><strong>SMEMBERS</strong> key</td><td>è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td><strong>SCARD</strong> key</td><td>è·å–é›†åˆçš„æˆå‘˜æ•°</td></tr><tr><td><strong>SINTER</strong> key1 [key2]</td><td>è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†</td></tr><tr><td><strong>SUNION</strong> key1 [key2]</td><td>è¿”å›æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†</td></tr><tr><td><strong>SREM</strong> key member1 [member2]</td><td>ç§»é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr></tbody></table><h3 id="3-5-æœ‰åºé›†åˆæ“ä½œå‘½ä»¤">3.5 æœ‰åºé›†åˆæ“ä½œå‘½ä»¤</h3><p>Redis<strong>æœ‰åº</strong>é›†åˆæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆï¼Œä¸”<strong>ä¸å…è®¸æœ‰é‡å¤</strong>æˆå‘˜ã€‚æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚å¸¸ç”¨å‘½ä»¤ï¼š</p><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><table><thead><tr><th>æœ‰åºé›†åˆæ“ä½œå‘½ä»¤</th><th></th></tr></thead><tbody><tr><td><strong>ZADD</strong> key score1 member1 [score2 member2]</td><td>å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr><tr><td><strong>ZRANGE</strong> key start stop [WITHSCORES]</td><td>é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</td></tr><tr><td><strong>ZINCRBY</strong> key increment member</td><td>æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡ increment</td></tr><tr><td><strong>ZREM</strong> key member [member â€¦]</td><td>ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr></tbody></table><h3 id="3-6-é€šç”¨å‘½ä»¤">3.6 é€šç”¨å‘½ä»¤</h3><p>Redisçš„é€šç”¨å‘½ä»¤æ˜¯ä¸åˆ†æ•°æ®ç±»å‹çš„ï¼Œéƒ½å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤ï¼š</p><ul><li>KEYS pattern æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼( pattern)çš„ key</li><li>EXISTS key æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨</li><li>TYPE key è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹</li><li>DEL key è¯¥å‘½ä»¤ç”¨äºåœ¨ key å­˜åœ¨æ˜¯åˆ é™¤ key</li></ul><p>ğŸ’¡<strong>æç¤º</strong>ï¼šå¯ä»¥é€šè¿‡ 0 -1 çš„æ–¹å¼æ¥éå†æ•´ä¸ªè¡¨æ ¼</p><p>ğŸ’¡<strong>ç¬”è®°</strong>ï¼šåŒæ ·å…¼å®¹â€œ * â€æ¥è¿›è¡ŒæŸ¥è¯¢æ¯”å¦‚ç”¨keys set*å°±å¯ä»¥æŸ¥è¯¢åˆ°æ‰€æœ‰setå¼€å¤´çš„keyã€‚</p><h2 id="å››ã€åœ¨javaä¸­æ“ä½œredis">å››ã€åœ¨javaä¸­æ“ä½œredis</h2><h3 id="4-1redisçš„javaå®¢æˆ·ç«¯">4.1redisçš„javaå®¢æˆ·ç«¯</h3><p>Redis çš„ Java å®¢æˆ·ç«¯å¾ˆå¤šï¼Œå¸¸ç”¨çš„å‡ ç§ï¼š</p><ul><li>Jedis</li><li>Lettuce</li><li>Spring Data Redis</li></ul><p>æˆ‘è¿™é‡Œç”¨çš„æ˜¯<strong>Spring Data Redis</strong></p><h3 id="4-2Spring-Data-Redisä½¿ç”¨æ–¹å¼">4.2Spring Data Redisä½¿ç”¨æ–¹å¼</h3><p>Spring Data Redis æ˜¯ Spring çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†åœ¨ Spring åº”ç”¨ä¸­é€šè¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥è®¿é—® Redis æœåŠ¡ï¼Œå¯¹ Redis åº•å±‚å¼€å‘åŒ…è¿›è¡Œäº†é«˜åº¦å°è£…ã€‚åœ¨ Spring é¡¹ç›®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Spring Data Redisæ¥ç®€åŒ– Redis æ“ä½œã€‚</p><p>ç½‘å€ï¼š<a href="https://spring.io/projects/spring-data-redis">https://spring.io/projects/spring-data-redis</a></p><p>Spring Bootæä¾›äº†å¯¹åº”çš„Starterï¼Œmavenåæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Spring Data Redisä¸­æä¾›äº†ä¸€ä¸ªé«˜åº¦å°è£…çš„ç±»ï¼š<strong>RedisTemplate</strong>ï¼Œå¯¹ç›¸å…³apiè¿›è¡Œäº†å½’ç±»å°è£…,å°†åŒä¸€ç±»å‹æ“ä½œå°è£…ä¸ºoperationæ¥å£ï¼Œå…·ä½“åˆ†ç±»å¦‚ä¸‹ï¼š</p><ul><li>ValueOperationsï¼šstringæ•°æ®æ“ä½œ</li><li>SetOperationsï¼šsetç±»å‹æ•°æ®æ“ä½œ</li><li>ZSetOperationsï¼šzsetç±»å‹æ•°æ®æ“ä½œ</li><li>HashOperationsï¼šhashç±»å‹çš„æ•°æ®æ“ä½œ</li><li>ListOperationsï¼šlistç±»å‹çš„æ•°æ®æ“ä½œ</li></ul><h3 id="4-3ä½¿ç”¨æ­¥éª¤">4.3ä½¿ç”¨æ­¥éª¤</h3><h4 id="4-3-1å¯¼å…¥åæ ‡">4.3.1å¯¼å…¥åæ ‡</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="4-3-2é…ç½®">4.3.2é…ç½®</h4><p><strong>è§£é‡Šè¯´æ˜ï¼š</strong></p><p>database:æŒ‡å®šä½¿ç”¨Redisçš„å“ªä¸ªæ•°æ®åº“ï¼ŒRedisæœåŠ¡å¯åŠ¨åé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œç¼–å·åˆ†åˆ«æ˜¯ä»0åˆ°15ã€‚</p><p>å¯ä»¥é€šè¿‡ä¿®æ”¹Redisé…ç½®æ–‡ä»¶æ¥æŒ‡å®šæ•°æ®åº“çš„æ•°é‡ã€‚</p><p>åœ¨application.ymlä¸­æ·»åŠ è¯»å–application-dev.ymlä¸­çš„ç›¸å…³Redisé…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">$&#123;sky.redis.host&#125;</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-string">$&#123;sky.redis.port&#125;</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">$&#123;sky.redis.password&#125;</span><br>    <span class="hljs-attr">database:</span> <span class="hljs-string">$&#123;sky.redis.database&#125;</span><br></code></pre></td></tr></table></figure><p>åœ¨application-dev.ymlä¸­æ·»åŠ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">sky:</span><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span><br>    <span class="hljs-comment">#æ²¡æœ‰è®¾ç½®å¯†ç çš„è¯ä¸éœ€è¦è®¾ç½®</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br>    <span class="hljs-comment">#é»˜è®¤æ˜¯10</span><br>    <span class="hljs-attr">database:</span> <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h4 id="4-3-3é…ç½®ç±»">4.3.3é…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.sky.config;<br><br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfiguration</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RedisTemplate <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory redisConnectionFactory)</span>&#123;<br>        log.info(<span class="hljs-string">&quot;å¼€å§‹åˆ›å»ºredisæ¨¡æ¿å¯¹è±¡...&quot;</span>);<br>        <span class="hljs-type">RedisTemplate</span> <span class="hljs-variable">redisTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>();<br>        <span class="hljs-comment">//è®¾ç½®redisçš„è¿æ¥å·¥å‚å¯¹è±¡</span><br>        redisTemplate.setConnectionFactory(redisConnectionFactory);<br>        <span class="hljs-comment">//è®¾ç½®redis keyçš„åºåˆ—åŒ–å™¨</span><br>        redisTemplate.setKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());<br>        <span class="hljs-keyword">return</span> redisTemplate;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Šè¯´æ˜ï¼š</strong></p><p>å½“å‰é…ç½®ç±»ä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸º Spring Boot æ¡†æ¶ä¼šè‡ªåŠ¨è£…é… RedisTemplate å¯¹è±¡ï¼Œä½†æ˜¯é»˜è®¤çš„keyåºåˆ—åŒ–å™¨ä¸º</p><p>JdkSerializationRedisSerializerï¼Œå¯¼è‡´æˆ‘ä»¬å­˜åˆ°Redisä¸­åçš„æ•°æ®å’ŒåŸå§‹æ•°æ®æœ‰å·®åˆ«ï¼Œæ•…è®¾ç½®ä¸º</p><p>StringRedisSerializeråºåˆ—åŒ–å™¨ã€‚</p><h4 id="4-3-4é€šè¿‡RedisTemplateå¯¹è±¡æ“ä½œRedis">4.3.4é€šè¿‡RedisTemplateå¯¹è±¡æ“ä½œRedis</h4><p>åœ¨testä¸‹æ–°å»ºæµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.sky.test;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.*;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringDataRedisTest</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRedisTemplate</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(redisTemplate);<br>        <span class="hljs-comment">//stringæ•°æ®æ“ä½œ</span><br>        <span class="hljs-type">ValueOperations</span> <span class="hljs-variable">valueOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue();<br>        <span class="hljs-comment">//hashç±»å‹çš„æ•°æ®æ“ä½œ</span><br>        <span class="hljs-type">HashOperations</span> <span class="hljs-variable">hashOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForHash();<br>        <span class="hljs-comment">//listç±»å‹çš„æ•°æ®æ“ä½œ</span><br>        <span class="hljs-type">ListOperations</span> <span class="hljs-variable">listOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForList();<br>        <span class="hljs-comment">//setç±»å‹æ•°æ®æ“ä½œ</span><br>        <span class="hljs-type">SetOperations</span> <span class="hljs-variable">setOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForSet();<br>        <span class="hljs-comment">//zsetç±»å‹æ•°æ®æ“ä½œ</span><br>        <span class="hljs-type">ZSetOperations</span> <span class="hljs-variable">zSetOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForZSet();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-3-æ“ä½œå¸¸è§ç±»å‹æ•°æ®">4.2.3 æ“ä½œå¸¸è§ç±»å‹æ•°æ®</h4><p><strong>1). æ“ä½œå­—ç¬¦ä¸²ç±»å‹æ•°æ®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æ“ä½œå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testString</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-comment">// set get setex setnx</span><br>       redisTemplate.opsForValue().set(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;å°æ˜&quot;</span>);<br>       <span class="hljs-type">String</span> <span class="hljs-variable">city</span> <span class="hljs-operator">=</span> (String) redisTemplate.opsForValue().get(<span class="hljs-string">&quot;name&quot;</span>);<br>       System.out.println(city);<br>       redisTemplate.opsForValue().set(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-string">&quot;1234&quot;</span>,<span class="hljs-number">3</span>, TimeUnit.MINUTES);<br>       redisTemplate.opsForValue().setIfAbsent(<span class="hljs-string">&quot;lock&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>);<br>       redisTemplate.opsForValue().setIfAbsent(<span class="hljs-string">&quot;lock&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>);<br>   &#125;<br></code></pre></td></tr></table></figure><p><strong>2). æ“ä½œå“ˆå¸Œç±»å‹æ•°æ®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æ“ä½œå“ˆå¸Œç±»å‹çš„æ•°æ®</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testHash</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-comment">//hset hget hdel hkeys hvals</span><br>       <span class="hljs-type">HashOperations</span> <span class="hljs-variable">hashOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForHash();<br><br>       hashOperations.put(<span class="hljs-string">&quot;100&quot;</span>,<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;tom&quot;</span>);<br>       hashOperations.put(<span class="hljs-string">&quot;100&quot;</span>,<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-string">&quot;20&quot;</span>);<br><br>       <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> (String) hashOperations.get(<span class="hljs-string">&quot;100&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>);<br>       System.out.println(name);<br><br>       <span class="hljs-type">Set</span> <span class="hljs-variable">keys</span> <span class="hljs-operator">=</span> hashOperations.keys(<span class="hljs-string">&quot;100&quot;</span>);<br>       System.out.println(keys);<br><br>       <span class="hljs-type">List</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> hashOperations.values(<span class="hljs-string">&quot;100&quot;</span>);<br>       System.out.println(values);<br><br>       hashOperations.delete(<span class="hljs-string">&quot;100&quot;</span>,<span class="hljs-string">&quot;age&quot;</span>);<br>   &#125;<br></code></pre></td></tr></table></figure><p><strong>3). æ“ä½œåˆ—è¡¨ç±»å‹æ•°æ®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æ“ä½œåˆ—è¡¨ç±»å‹çš„æ•°æ®</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testList</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-comment">//lpush lrange rpop llen</span><br>       <span class="hljs-type">ListOperations</span> <span class="hljs-variable">listOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForList();<br><br>       listOperations.leftPushAll(<span class="hljs-string">&quot;mylist&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>);<br>       listOperations.leftPush(<span class="hljs-string">&quot;mylist&quot;</span>,<span class="hljs-string">&quot;d&quot;</span>);<br><br>       <span class="hljs-type">List</span> <span class="hljs-variable">mylist</span> <span class="hljs-operator">=</span> listOperations.range(<span class="hljs-string">&quot;mylist&quot;</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>);<br>       System.out.println(mylist);<br><br>       listOperations.rightPop(<span class="hljs-string">&quot;mylist&quot;</span>);<br><br>       <span class="hljs-type">Long</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> listOperations.size(<span class="hljs-string">&quot;mylist&quot;</span>);<br>       System.out.println(size);<br>   &#125;<br></code></pre></td></tr></table></figure><p><strong>4). æ“ä½œé›†åˆç±»å‹æ•°æ®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æ“ä½œé›†åˆç±»å‹çš„æ•°æ®</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSet</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-comment">//sadd smembers scard sinter sunion srem</span><br>       <span class="hljs-type">SetOperations</span> <span class="hljs-variable">setOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForSet();<br><br>       setOperations.add(<span class="hljs-string">&quot;set1&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-string">&quot;d&quot;</span>);<br>       setOperations.add(<span class="hljs-string">&quot;set2&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;x&quot;</span>,<span class="hljs-string">&quot;y&quot;</span>);<br><br>       <span class="hljs-type">Set</span> <span class="hljs-variable">members</span> <span class="hljs-operator">=</span> setOperations.members(<span class="hljs-string">&quot;set1&quot;</span>);<br>       System.out.println(members);<br><br>       <span class="hljs-type">Long</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> setOperations.size(<span class="hljs-string">&quot;set1&quot;</span>);<br>       System.out.println(size);<br><br>       <span class="hljs-type">Set</span> <span class="hljs-variable">intersect</span> <span class="hljs-operator">=</span> setOperations.intersect(<span class="hljs-string">&quot;set1&quot;</span>, <span class="hljs-string">&quot;set2&quot;</span>);<br>       System.out.println(intersect);<br><br>       <span class="hljs-type">Set</span> <span class="hljs-variable">union</span> <span class="hljs-operator">=</span> setOperations.union(<span class="hljs-string">&quot;set1&quot;</span>, <span class="hljs-string">&quot;set2&quot;</span>);<br>       System.out.println(union);<br><br>       setOperations.remove(<span class="hljs-string">&quot;set1&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>);<br>   &#125;<br></code></pre></td></tr></table></figure><p><strong>5). æ“ä½œæœ‰åºé›†åˆç±»å‹æ•°æ®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æ“ä½œæœ‰åºé›†åˆç±»å‹çš„æ•°æ®</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testZset</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-comment">//zadd zrange zincrby zrem</span><br>       <span class="hljs-type">ZSetOperations</span> <span class="hljs-variable">zSetOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForZSet();<br><br>       zSetOperations.add(<span class="hljs-string">&quot;zset1&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-number">10</span>);<br>       zSetOperations.add(<span class="hljs-string">&quot;zset1&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-number">12</span>);<br>       zSetOperations.add(<span class="hljs-string">&quot;zset1&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-number">9</span>);<br><br>       <span class="hljs-type">Set</span> <span class="hljs-variable">zset1</span> <span class="hljs-operator">=</span> zSetOperations.range(<span class="hljs-string">&quot;zset1&quot;</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>);<br>       System.out.println(zset1);<br><br>       zSetOperations.incrementScore(<span class="hljs-string">&quot;zset1&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-number">10</span>);<br><br>       zSetOperations.remove(<span class="hljs-string">&quot;zset1&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>);<br>   &#125;<br></code></pre></td></tr></table></figure><p><strong>6). é€šç”¨å‘½ä»¤æ“ä½œ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * é€šç”¨å‘½ä»¤æ“ä½œ</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCommon</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-comment">//keys exists type del</span><br>       <span class="hljs-type">Set</span> <span class="hljs-variable">keys</span> <span class="hljs-operator">=</span> redisTemplate.keys(<span class="hljs-string">&quot;*&quot;</span>);<br>       System.out.println(keys);<br><br>       <span class="hljs-type">Boolean</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> redisTemplate.hasKey(<span class="hljs-string">&quot;name&quot;</span>);<br>       <span class="hljs-type">Boolean</span> <span class="hljs-variable">set1</span> <span class="hljs-operator">=</span> redisTemplate.hasKey(<span class="hljs-string">&quot;set1&quot;</span>);<br><br>       <span class="hljs-keyword">for</span> (Object key : keys) &#123;<br>           <span class="hljs-type">DataType</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> redisTemplate.type(key);<br>           System.out.println(type.name());<br>       &#125;<br><br>       redisTemplate.delete(<span class="hljs-string">&quot;mylist&quot;</span>);<br>   &#125;<br></code></pre></td></tr></table></figure><h2 id="äº”ã€ç®€åŒ–æ–¹å¼">äº”ã€ç®€åŒ–æ–¹å¼</h2><h3 id="5-1-Spring-Cache">5.1 Spring Cache</h3><h4 id="5-1-1-ä»‹ç»">5.1.1 ä»‹ç»</h4><p>Spring Cache æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ç°äº†åŸºäºæ³¨è§£çš„ç¼“å­˜åŠŸèƒ½ï¼Œåªéœ€è¦ç®€å•åœ°åŠ ä¸€ä¸ªæ³¨è§£ï¼Œå°±èƒ½å®ç°ç¼“å­˜åŠŸèƒ½ã€‚</p><p>Spring Cache æä¾›äº†ä¸€å±‚æŠ½è±¡ï¼Œåº•å±‚å¯ä»¥åˆ‡æ¢ä¸åŒçš„ç¼“å­˜å®ç°ï¼Œä¾‹å¦‚ï¼š</p><ul><li>EHCache</li><li>Caffeine</li><li>Redis(å¸¸ç”¨)</li></ul><p><strong>èµ·æ­¥ä¾èµ–ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>                      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="5-1-2-å¸¸ç”¨æ³¨è§£">5.1.2 å¸¸ç”¨æ³¨è§£</h4><p>åœ¨SpringCacheä¸­æä¾›äº†å¾ˆå¤šç¼“å­˜æ“ä½œçš„æ³¨è§£ï¼Œå¸¸è§çš„æ˜¯ä»¥ä¸‹çš„å‡ ä¸ªï¼š</p><table><thead><tr><th><strong>æ³¨è§£</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>@EnableCaching</td><td>å¼€å¯ç¼“å­˜æ³¨è§£åŠŸèƒ½ï¼Œé€šå¸¸åŠ åœ¨å¯åŠ¨ç±»ä¸Š</td></tr><tr><td>@Cacheable</td><td>åœ¨æ–¹æ³•æ‰§è¡Œå‰å…ˆæŸ¥è¯¢ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼›å¦‚æœæ²¡æœ‰ç¼“å­˜æ•°æ®ï¼Œè°ƒç”¨æ–¹æ³•å¹¶å°†æ–¹æ³•è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­</td></tr><tr><td>@CachePut</td><td>å°†æ–¹æ³•çš„è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­</td></tr><tr><td>@CacheEvict</td><td>å°†ä¸€æ¡æˆ–å¤šæ¡æ•°æ®ä»ç¼“å­˜ä¸­åˆ é™¤</td></tr></tbody></table><p>åœ¨spring booté¡¹ç›®ä¸­ï¼Œä½¿ç”¨ç¼“å­˜æŠ€æœ¯åªéœ€åœ¨é¡¹ç›®ä¸­å¯¼å…¥ç›¸å…³ç¼“å­˜æŠ€æœ¯çš„ä¾èµ–åŒ…ï¼Œå¹¶åœ¨å¯åŠ¨ç±»ä¸Šä½¿ç”¨@EnableCachingå¼€å¯ç¼“å­˜æ”¯æŒå³å¯ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨Redisä½œä¸ºç¼“å­˜æŠ€æœ¯ï¼Œåªéœ€è¦å¯¼å…¥Spring data Redisçš„mavenåæ ‡å³å¯ã€‚</p><p><strong>æ³¨è§£çš„å±æ€§</strong></p><p>ğŸ’¡**æ³¨æ„ï¼š**cachenameï¼šç”¨äºåˆ¶å®šæ“ä½œçš„Redisè¡¨</p><p>keyï¼šç”¨äºåˆ¶å®šå¯¹äºçš„keyï¼Œå¯ä»¥ç”¨spelè¯­æ³•æ¥ä¹¦å†™ï¼Œè¿›å…¥æºç å³å¯æŸ¥çœ‹ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Cacheable(cacheNames = &quot;setmealcache&quot; ,key = &quot;#categoryId&quot;)</span><br><span class="hljs-comment">//åœ¨æ–¹æ³•æ‰§è¡Œå‰å…ˆæŸ¥è¯¢ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼›å¦‚æœæ²¡æœ‰ç¼“å­˜æ•°æ®ï¼Œè°ƒç”¨æ–¹æ³•å¹¶å°†æ–¹æ³•è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@CacheEvict(cacheNames = &quot;setmealcache&quot;, key = &quot;#setmealDTO.categoryId&quot;)</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@CacheEvict(cacheNames = &quot;setmealcache&quot;,allEntries = true)</span><br><span class="hljs-comment">//å…¨éƒ¨åˆ é™¤</span><br><span class="hljs-comment">//å°†ä¸€æ¡æˆ–å¤šæ¡æ•°æ®ä»ç¼“å­˜ä¸­åˆ é™¤</span><br></code></pre></td></tr></table></figure><h3 id="5-2-å…·ä½“çš„å®ç°æ€è·¯">5.2 å…·ä½“çš„å®ç°æ€è·¯</h3><p>å…·ä½“çš„å®ç°æ€è·¯</p><p>å¦‚ä¸‹:</p><ul><li><p>å¯¼å…¥Spring Cacheå’ŒRedisç›¸å…³mavenåæ ‡</p></li><li><p>åœ¨å¯åŠ¨ç±»ä¸ŠåŠ å…¥@EnableCachingæ³¨è§£ï¼Œå¼€å¯ç¼“å­˜æ³¨è§£åŠŸèƒ½</p></li><li><p>åœ¨æ¥å£Controllerçš„læ–¹æ³•ä¸ŠåŠ å…¥@Cacheableã€@CachePutã€@CacheEvictæ³¨è§£</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>å…¥é—¨çŸ¥è¯†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å…¥é—¨çŸ¥è¯†</tag>
      
      <tag>redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQLçŸ¥è¯†æ€»ç»“</title>
    <link href="/pingpinghome/2025/07/24/MySQL%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"/>
    <url>/pingpinghome/2025/07/24/MySQL%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1>MYSQL</h1><h2 id="1-MYSQLä¼˜åŒ–é—®é¢˜">1.MYSQLä¼˜åŒ–é—®é¢˜</h2><h3 id="ä¸€ã€å¦‚ä½•å®šä½æ…¢æŸ¥è¯¢ï¼Ÿ">ä¸€ã€å¦‚ä½•å®šä½æ…¢æŸ¥è¯¢ï¼Ÿ</h3><p><strong>åŸå› ï¼š</strong></p><ul><li>èšåˆæŸ¥è¯¢</li><li>å¤šè¡¨æŸ¥è¯¢</li><li>è¡¨æ•°æ®é‡è¿‡å¤§æŸ¥è¯¢</li><li>æ·±åº¦åˆ†é¡µæŸ¥è¯¢</li><li>è¡¨è±¡ï¼šé¡µé¢åŠ è½½è¿‡æ…¢ã€æ¥å£<strong>å‹æµ‹</strong>å“åº”æ—¶é—´è¶…è¿‡1s</li></ul><p><strong>å·¥å…·</strong>ï¼š</p><ul><li><p>è°ƒè¯•å·¥å…·ï¼šarthas</p></li><li><p>è¿ç»´å·¥å…·ï¼šprometheusã€<strong>skywalking</strong></p></li><li><p>MYSQLä¸­è‡ªå¸¦çš„æ…¢æ—¥å¿—æŸ¥è¯¢ï¼Œéœ€è¦é…ç½®å¼€å¯å’Œè®¾ç½®æ…¢æ—¥å¿—çš„æ—¶é—´ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#å¼€å¯MySQLæ…¢æ—¥å¿—æŸ¥è¯¢å¼€å…³<br>slow_query_log=1<br>#è®¾ç½®æ…¢æ—¥å¿—çš„æ—¶é—´ä¸º2ç§’ï¼ŒSQLè¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡2ç§’ï¼Œå°±ä¼šè§†ä¸ºæ…¢æŸ¥è¯¢ï¼Œè®°å½•æ…¢æŸ¥è¯¢æ—¥å¿—<br>long_query_time=2<br></code></pre></td></tr></table></figure></li></ul><p><strong>å›ç­”</strong>ï¼šå…ˆä»‹ç»è‡ªå·±çš„åœºæ™¯+ç”¨çš„å·¥å…·+æ‰©å±•è‡ªå·±çŸ¥é“çš„å…¶ä»–çŸ¥è¯†</p><h3 id="äºŒã€å®šä½åˆ°äº†è¯­å¥ä¹‹åï¼Œå¦‚ä½•åˆ†æå‘¢ï¼Ÿ">äºŒã€å®šä½åˆ°äº†è¯­å¥ä¹‹åï¼Œå¦‚ä½•åˆ†æå‘¢ï¼Ÿ</h3><p><strong>å·¥å…·/è¯­å¥ï¼š</strong></p><p>åœ¨è¯­å¥é¢å‰æ·»åŠ <strong>EXPLANæˆ–è€…DESC</strong></p><ul><li>possible-keysï¼šå½“å‰sqlå¯èƒ½ç”¨åˆ°çš„ç´¢å¼•</li><li><strong>keyï¼šå®é™…å‘½ä¸­çš„ç´¢å¼•</strong></li><li><strong>key-lenï¼šç´¢å¼•å ç”¨çš„å¤§å°</strong></li><li><strong>extraï¼šé¢å¤–çš„ä¼˜åŒ–å»ºè®®ï¼Œæ˜¯å¦å‡ºç°äº†å›è¡¨ï¼ˆå¦‚æœå‡ºç°using index condition å°±è¡¨æ˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼‰</strong></li><li><strong>type</strong>ï¼šè¿æ¥ç±»å‹ï¼Œæ€§èƒ½ç”±å¥½åˆ°åï¼šNULLã€systemã€<strong>constï¼ˆä¸»é”®æŸ¥è¯¢ï¼‰ã€eqrefï¼ˆå”¯ä¸€ç´¢å¼•æˆ–è€…ä¸»é”®ç´¢å¼•æŸ¥è¯¢ï¼‰ã€refï¼ˆç´¢å¼•æŸ¥è¯¢ï¼‰ã€rangeï¼ˆèŒƒå›´æŸ¥è¯¢ï¼‰</strong>ã€indexï¼ˆå…¨ç´¢å¼•æŸ¥è¯¢ï¼‰ã€allï¼ˆå…¨ç›˜æ‰«æï¼‰</li><li>å¦‚æœæ˜¯indexå’Œallå°±éœ€è¦ä¼˜åŒ–äº†ã€‚</li></ul><p><strong>å›ç­”</strong>ï¼š</p><p>é¢è¯•å®˜ï¼šé‚£è¿™ä¸ªSQLè¯­å¥æ‰§è¡Œå¾ˆæ…¢ï¼Œå¦‚ä½•åˆ†æå‘¢ï¼Ÿ<br>å€™é€‰äººï¼šå¦‚æœä¸€æ¡sglæ‰§è¡Œå¾ˆæ…¢çš„è¯ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨mysalè‡ªåŠ¨çš„æ‰§è¡Œè®¡åˆ’explainæ¥å»æŸ¥çœ‹è¿™æ¡sqlçš„æ‰§è¡Œæƒ…å†µï¼Œ</p><p>æ¯”å¦‚åœ¨è¿™é‡Œé¢å¯ä»¥é€šè¿‡keyå’Œkey_lenæ£€æŸ¥æ˜¯å¦å‘½ä¸­äº†ç´¢å¼•ï¼Œå¦‚æœæœ¬èº«å·²ç»æ·»åŠ äº†ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­ç´¢å¼•æ˜¯å¦æœ‰å¤±æ•ˆçš„æƒ…å†µï¼Œ</p><p>ç¬¬äºŒä¸ªï¼Œå¯ä»¥é€šè¿‡ypå­—æ®µæŸ¥çœ‹sqlæ˜¯å¦æœ‰è¿›ä¸€æ­¥çš„ä¼˜åŒ–ç©ºé—´ï¼Œæ˜¯å¦å­˜åœ¨å…¨ç´¢å¼•æ‰«ææˆ–å…¨ç›˜æ‰«æï¼Œ</p><p>ç¬¬ä¸‰ä¸ªå¯ä»¥é€šè¿‡extraå»ºè®®æ¥åˆ¤æ–­ï¼Œæ˜¯å¦å‡ºç°äº†å›è¡¨çš„æƒ…å†µï¼Œå¦‚æœå‡ºç°äº†ï¼Œå¯ä»¥å°è¯•æ·»åŠ ç´¢å¼•æˆ–ä¿®æ”¹è¿”å›å­—æ®µæ¥ä¿®å¤</p><h3 id="ä¸‰ã€ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿ">ä¸‰ã€ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿ</h3><p><strong>å›ç­”</strong>ï¼ˆå®šä¹‰+ç‰¹ç‚¹ï¼‰</p><ul><li><strong>ç´¢å¼•(index)æ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ï¼ˆæœ‰åºï¼‰</strong>,å…¶å®å°±æ˜¯b+æ ‘ã€‚</li><li>æé«˜æ•°æ®æ£€ç´¢çš„æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬ï¼ˆä¸éœ€è¦å…¨è¡¨æ‰«æï¼‰</li><li>é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼ˆB+æ ‘ï¼‰ï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½äº†CPUçš„æ¶ˆè€—</li><li>mysqlé»˜è®¤çš„innoDBå¼•æ“é‡‡ç”¨çš„æ˜¯B+æ ‘çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨ç´¢å¼•</li></ul><h3 id="å››ã€ç´¢å¼•çš„åº•å±‚ï¼ˆB-æ ‘å’Œç‰¹ç‚¹ï¼‰">å››ã€ç´¢å¼•çš„åº•å±‚ï¼ˆB+æ ‘å’Œç‰¹ç‚¹ï¼‰</h3><h4 id="1-Bæ ‘çš„ç‰¹ç‚¹">1.Bæ ‘çš„ç‰¹ç‚¹</h4><ol><li>Bæ ‘æœ€å¤šå››ä¸ªkeyï¼Œæœ€å¤šäº”ä¸ªå­—èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¹Ÿæ˜¯æœ€å¤šå››ä¸ªkeyã€‚</li><li>Bæ ‘æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨äº†æ•°æ®ï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡æ ¹æ®ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™éƒ½ä¼šé¢å¤–æŸ¥è¯¢å¤šä½™çš„æ•°æ®å¯¼è‡´ç£ç›˜è¯»å†™é«˜ã€‚</li><li>é˜¶æ•°æ›´å¤šï¼Œè·¯å¾„æ›´çŸ­</li></ol><h4 id="2-B-æ ‘çš„ç‰¹ç‚¹">2.B+æ ‘çš„ç‰¹ç‚¹</h4><pre><code class="hljs">1. B+æ ‘ï¼šç£ç›˜è¯»å†™ä»£ä»·æ›´ä½ï¼Œ**éå¶å­èŠ‚ç‚¹åªå­˜å‚¨æŒ‡é’ˆ**ï¼Œå¶å­é˜¶å­˜å‚¨æ•°æ®1. B+æ ‘ä¾¿äºæ‰«åº“å’ŒåŒºé—´æŸ¥è¯¢ï¼Œå¶å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ª**åŒå‘é“¾è¡¨**1. æŸ¥è¯¢æ•ˆç‡B+æ ‘æ›´åŠ ç¨³å®šï¼ˆå¯ä»¥å¿½ç•¥ï¼‰1. é˜¶æ•°æ›´å¤šï¼Œè·¯å¾„æ›´çŸ­</code></pre><ul><li>å¯èƒ½ä¼šé—®B+æ ‘å’ŒBæ ‘çš„åŒºåˆ«</li></ul><p>###äº”ã€ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ï¼Ÿ</p><p><strong>å›ç­”</strong></p><ul><li><p><strong>èšç°‡ç´¢å¼•ï¼ˆèšé›†ç´¢å¼•ï¼‰</strong>ï¼š<strong>æ•°æ®å’Œç´¢å¼•æ”¾åˆ°ä¸€å—ï¼ŒB+æ ‘çš„å¶å­èŠ‚ç‚¹ä¿å­˜æ•´è¡Œæ•°æ®</strong>ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ª</p><p>ğŸ“–<strong>æ³¨æ„ï¼š</strong>(å¦‚æœæœ‰ä¸€ä¸ªä¸»é”®ã€‚é‚£ä¹ˆä¸»é”®å°±æ˜¯ç´¢å¼•ã€‚å¦‚æœä¸å­˜åœ¨<strong>ä¸»é”®</strong>ï¼Œé‚£ä¹ˆ<strong>unique</strong>ç´¢å¼•ä¸ºèšé›†ç´¢å¼•ï¼Œå¦‚æœéƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆinnoDBå°±ä¼šè‡ªåŠ¨ç”Ÿæˆ<strong>rowid</strong>ä½œä¸ºéšè—ç´¢å¼•ï¼)</p></li><li><p><strong>éèšç°‡ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰</strong>ï¼š<strong>æ•°æ®å’Œç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼ŒB+æ ‘çš„å¶å­èŠ‚ç‚¹ä¿å­˜å¯¹åº”çš„ä¸»é”®ï¼Œå¯ä»¥æœ‰å¤šä¸ªã€‚</strong></p><p>ğŸ’¡**æ³¨æ„ï¼š**äºŒçº§ç´¢å¼•ä¸€èˆ¬éƒ½æ˜¯ä¸€è¡Œæ•°æ®ï¼Œè€Œä¸æ˜¯èšç°‡ç´¢å¼•ä¸€æ ·æ˜¯ä¸€ä¸ªæ•°æ®ã€‚</p></li><li><p>**å›è¡¨æŸ¥è¯¢ï¼š**ä¸¾ä¸ªä¾‹å­æ–¹ä¾¿ç†è§£ï¼Œæ¯”å¦‚æˆ‘ä»¬æŸ¥è¯¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select * from user where name =&quot;çŒªåšå®¢&quot;;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶å…ˆèµ°äºŒçº§ç´¢å¼•æŸ¥è¯¢åˆ°èšé›†ç´¢å¼•ï¼Œä¹‹åæ ¹æ®èšé›†ç´¢å¼•æŸ¥æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„æ•°æ®ã€‚</p><p>ğŸ“–ç¬”è®°ï¼šé€šè¿‡äºŒçº§ç´¢å¼•æŸ¥æ‰¾åˆ°ä¸»é”®å€¼ï¼Œåˆ°èšé›†ç´¢å¼•ä¸­æŸ¥æ‰¾æ•´è¡Œæ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å›è¡¨æŸ¥è¯¢ã€‚</p></li></ul><h3 id="ä¸ƒã€è¦†ç›–ç´¢å¼•">ä¸ƒã€è¦†ç›–ç´¢å¼•</h3><p><strong>å›ç­”</strong></p><p><strong>è¦†ç›–ç´¢å¼•æ˜¯æŒ‡æŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œè¿”å›çš„åˆ—ï¼Œå¿…é¡»åœ¨ ç´¢å¼•ä¸­å…¨éƒ¨èƒ½å¤Ÿæ‰¾åˆ°</strong></p><p>è¯´äººè¯å°±æ˜¯ï¼Œä¸€æ¬¡æŸ¥è¯¢å°±å¯ä»¥ç›´æ¥æ‰¾å‡ºæ¥ï¼Œä¸éœ€è¦å›è¡¨æŸ¥è¯¢ã€‚</p><ul><li>ä½¿ç”¨idæŸ¥è¯¢ï¼ˆä¸»é”®ï¼‰ï¼Œç›´æ¥èµ°èšé›†ç´¢å¼•æŸ¥è¯¢ï¼Œä¸€æ¬¡ç´¢å¼•æ‰«æï¼Œç›´æ¥è¿”å›æ•´è¡Œæ•°æ®ï¼Œæ•ˆç‡é«˜</li><li>å¦‚æœè¿”å›çš„åˆ—ä¸­æ²¡æœ‰æ‰€è¦æŸ¥è¯¢çš„å­—æ®µï¼Œæœ‰å¯èƒ½ä¼šè§¦å‘å›è¡¨æŸ¥è¯¢ï¼Œæ‰€ä»¥å°½é‡é¿å…ç”¨select*</li></ul><h3 id="å…«ã€è¶…å¤§åˆ†é¡µå¦‚ä½•å¤„ç†">å…«ã€è¶…å¤§åˆ†é¡µå¦‚ä½•å¤„ç†</h3><p><strong>å®šä¹‰</strong></p><p>åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œå¦‚æœè¿›è¡Œlimitåˆ†é¡µæŸ¥è¯¢ï¼Œåœ¨æŸ¥è¯¢æ—¶ï¼Œè¶Šå¾€åï¼Œæ•ˆç‡è¶Šä½</p><p><strong>å›ç­”</strong></p><p>å¯ä»¥ç”¨<strong>è¦†ç›–ç´¢å¼•+å­æŸ¥è¯¢æ¥è§£å†³</strong>ã€‚</p><p><img src="https://qjw-00.oss-cn-guangzhou.aliyuncs.com/%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2.jpg" alt=""></p><blockquote><p><strong>é¢è¯•å®˜ï¼šçŸ¥é“ä»€ä¹ˆå«è¦†ç›–ç´¢å¼•å˜›ï¼Ÿ</strong><br>å€™é€‰äººï¼šå—¯~ï¼Œæ¸…æ¥šçš„<br>è¦†ç›–ç´¢å¼•æ˜¯æŒ‡selectæŸ¥è¯¢è¯­å¥ä½¿ç”¨äº†ç´¢å¼•ï¼Œåœ¨è¿”å›çš„åˆ—ï¼Œå¿…é¡»åœ¨ç´¢å¼•ä¸­å…¨éƒ¨èƒ½å¤Ÿæ‰¾åˆ°ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨idæŸ¥è¯¢ï¼Œå®ƒä¼šç›´æ¥èµ°èšé›†ç´¢å¼•æŸ¥è¯¢ï¼Œä¸€æ¬¡ç´¢å¼•æ‰«æï¼Œç›´æ¥è¿”å›æ•°æ®ï¼Œæ€§èƒ½é«˜ã€‚<br>å¦‚æœæŒ‰ç…§äºŒçº§ç´¢å¼•æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œè¿”å›çš„åˆ—ä¸­æ²¡æœ‰åˆ›å»ºç´¢å¼•ï¼Œæœ‰å¯èƒ½ä¼šè§¦å‘å›è¡¨æŸ¥è¯¢ï¼Œå°½é‡é¿å…ä½¿ç”¨select*,å°½é‡åœ¨è¿”å›çš„åˆ—ä¸­éƒ½åŒ…å«æ·»åŠ ç´¢å¼•çš„å­—æ®µ<br><strong>é¢è¯•å®˜ï¼šMYSQLè¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ</strong><br>å€™é€‰äººï¼šå—¯ï¼Œè¶…å¤§åˆ†é¡µä¸€èˆ¬éƒ½æ˜¯åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Iitåˆ†é¡µæŸ¥è¯¢ï¼Œå¹¶ä¸”éœ€è¦å¯¹æ•°æ®è¿›è¡Œ<br>æ’åºï¼Œè¿™ä¸ªæ—¶å€™æ•ˆç‡å°±å¾ˆä½ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨è¦†ç›–ç´¢å¼•å’Œå­æŸ¥è¯¢æ¥è§£å†³<br>å…ˆåˆ†é¡µæŸ¥è¯¢æ•°æ®çš„idå­—æ®µï¼Œç¡®å®šäº†idä¹‹åï¼Œå†ç”¨å­æŸ¥è¯¢æ¥è¿‡æ»¤ï¼ŒåªæŸ¥è¯¢è¿™ä¸ªidåˆ—è¡¨ä¸­çš„æ•°æ®å°±å¯ä»¥äº†<br>å› ä¸ºæŸ¥è¯¢içš„æ—¶å€™ï¼Œèµ°çš„è¦†ç›–ç´¢å¼•ï¼Œæ‰€ä»¥æ•ˆç‡å¯ä»¥æå‡å¾ˆå¤š</p></blockquote><h3 id="ä¹ã€ç´¢å¼•åˆ›å»ºçš„åŸåˆ™ï¼ˆ1256è¦æåŠï¼‰">ä¹ã€ç´¢å¼•åˆ›å»ºçš„åŸåˆ™ï¼ˆ1256è¦æåŠï¼‰</h3><ol><li><strong>æ•°æ®é‡è¾ƒå¤§ï¼Œä¸”æŸ¥è¯¢é¢‘ç¹çš„è¡¨ï¼ˆå•è¡¨è¶…è¿‡10ä¸‡æ•°æ®ï¼‰</strong></li><li><strong>å¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ã€æ’åºã€åˆ†ç»„ï¼ˆwhereã€order by ã€ group byï¼‰æ“ä½œ</strong></li><li>å°½é‡é€‰æ‹©<strong>åŒºåˆ†åº¦é«˜</strong>çš„åˆ—ä½œä¸ºç´¢å¼•ï¼ŒåŒºåˆ†åº¦è¶Šé«˜ï¼Œæ•ˆç‡è¶Šé«˜ï¼ˆå°½é‡å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼ï¼ï¼‰</li><li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œå¯ä»¥åˆ©ç”¨<strong>å­—ç¬¦ä¸²çš„ç‰¹ç‚¹å»ºç«‹å‰ç¼€ç´¢å¼•</strong></li><li><strong>å°½é‡ä½¿ç”¨è”åˆç´¢å¼•</strong>ï¼ŒæŸ¥è¯¢æ—¶å¾ˆå¤šæ—¶å€™è”åˆç´¢å¼•å¯ä»¥è¦†ç›–ç´¢å¼•ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œé¿å…å›è¡¨ã€‚</li><li><strong>æ§åˆ¶ç´¢å¼•æ•°é‡</strong></li><li>å¦‚æœç´¢å¼•åˆ—ä¸èƒ½å­˜NULLè¦åŠ <strong>not null</strong>ï¼ï¼</li></ol><h3 id="åã€ç´¢å¼•å¤±æ•ˆï¼ˆ5ï¼‰">åã€ç´¢å¼•å¤±æ•ˆï¼ˆ5ï¼‰</h3><p><strong>åˆ¤æ–­æ ‡å‡†</strong></p><ul><li>è¿åäº†æœ€å·¦å‰ç¼€æ³•åˆ™</li><li>èŒƒå›´æŸ¥è¯¢å³è¾¹çš„åˆ—æ˜¯æ— æ³•ä½¿ç”¨èŒƒå›´ç´¢å¼•çš„</li><li>ä¸è¦å†ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè¿ç®—æ“ä½œï¼Œå¦åˆ™ç´¢å¼•å¤±æ•ˆ</li><li>å­—ç¬¦ä¸²ä¸åŠ å•å¼•å·</li><li>ä»¥likeå¼€å¤´çš„æ¨¡ç³Šç´¢å¼•ä¼šå¯¼è‡´å¤±æ•ˆï¼ˆ%åœ¨å‰é¢çš„éƒ½ä¼šå¤±æ•ˆï¼‰</li></ul><p><strong>å·¥å…·</strong></p><p>æ‰§è¡Œè®¡åˆ’explain</p><h3 id="åä¸€ã€sqlçš„ä¼˜åŒ–ç»éªŒ">åä¸€ã€sqlçš„ä¼˜åŒ–ç»éªŒ</h3><ul><li>è¡¨çš„è®¾è®¡ä¼˜åŒ–</li><li>ç´¢å¼•ä¼˜åŒ–  ï¼ˆ<strong>ä¹+å</strong>ï¼‰</li><li>sqlè¯­å¥çš„ä¼˜åŒ–</li><li>ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»</li><li>åˆ†åº“åˆ†è¡¨</li></ul><h4 id="è¡¨çš„è®¾è®¡ä¼˜åŒ–ï¼ˆå‚è€ƒé˜¿é‡Œå¼€å‘æ‰‹å†Œï¼‰">è¡¨çš„è®¾è®¡ä¼˜åŒ–ï¼ˆå‚è€ƒé˜¿é‡Œå¼€å‘æ‰‹å†Œï¼‰</h4><ol><li>è®¾ç½®åˆé€‚çš„æ•°å€¼ï¼Œæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼ˆtinyint int bigintï¼‰</li><li>charå’Œvarcharï¼Œcharå®šé•¿æ•ˆç‡é«˜ï¼Œvarå¯å˜é•¿åº¦ï¼Œæ•ˆç‡ä½ä¸€äº›</li></ol><h4 id="sqlè¯­å¥çš„ä¼˜åŒ–">sqlè¯­å¥çš„ä¼˜åŒ–</h4><ol><li><strong>selectè¯­å¥é¿å… ï¼ˆ*ï¼‰ è¿™ç§æŸ¥æ‰¾</strong></li><li>sqlé¿å…ç´¢å¼•å¤±æ•ˆ</li><li><strong>union all</strong> ä»£æ›¿ union ï¼Œunionä¼šå¤šä¸€æ¬¡è¿‡æ»¤ï¼Œæ•ˆç‡ä½</li><li>é¿å…whereå­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œè¡¨è¾¾å¼æ“ä½œ</li><li>joinä¼˜åŒ–ï¼Œèƒ½ç”¨<strong>innerjoin</strong>å°±ä¸ç”¨å·¦å³joinï¼Œå¦‚æœè¦ç”¨ï¼Œä¸€å®šè¦ä»¥å°è¡¨ä¸ºé©±åŠ¨ï¼Œå†…è¿æ¥ä¼šå¯¹ä¸¤ä¸ªè¡¨è¿›è¡Œä¼˜åŒ–ï¼Œä¼˜å…ˆæŠŠå°è¡¨æ”¾å¤–è¾¹ï¼Œå¤§è¡¨æ”¾é‡Œè¾¹ï¼Œå·¦å³joinä¸ä¼šé‡æ–°æ’åº</li></ol><h2 id="2-äº‹åŠ¡">2.äº‹åŠ¡</h2><h3 id="2-1äº‹åŠ¡ä»‹ç»">2.1äº‹åŠ¡ä»‹ç»</h3><ul><li>äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ã€‚</li><li>æœ€å¥½çš„ä¾‹å­å°±æ˜¯é“¶è¡Œè½¬è´¦ã€‚</li><li>ç‰¹æ€§ï¼šACID<ul><li>åŸå­æ€§ï¼šè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ã€‚</li><li>ä¸€è‡´æ€§ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€</li><li>éš”ç¦»æ€§ï¼šæ•°æ®åº“æä¾›éš”ç¦»æœºåˆ¶ï¼Œä¿è¯ç‹¬ç«‹è¿è¡Œã€‚</li><li>æŒä¹…æ€§ï¼šä¸€æ—¦å›æ»šæˆ–è€…æäº¤ï¼Œå°±æ˜¯æ°¸ä¹…çš„ã€‚</li></ul></li></ul><h3 id="2-2äº‹åŠ¡çš„é—®é¢˜">2.2äº‹åŠ¡çš„é—®é¢˜</h3><ol><li><p>å¹¶å‘äº‹åŠ¡çš„é—®é¢˜</p><table><thead><tr><th>é—®é¢˜</th><th>æè¿°</th></tr></thead><tbody><tr><td>è„è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®</td></tr><tr><td>ä¸å¯é‡å¤è¯»</td><td>ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸åŒ</td></tr><tr><td>å¹»è¯»</td><td>æŸ¥è¯¢ä¸åˆ°ï¼Œæ’å…¥çš„æ—¶å€™åˆå‘ç°å·²ç»å­˜åœ¨</td></tr></tbody></table></li><li><p>è§£å†³</p><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>æœªæäº¤è¯»</td><td>âœ”ï¸</td><td>âœ”ï¸</td><td>âœ”ï¸</td></tr><tr><td>è¯»å·²æäº¤</td><td>âŒ</td><td>âœ”ï¸</td><td>âœ”ï¸</td></tr><tr><td>å¯é‡å¤è¯»ï¼ˆé»˜è®¤ï¼‰</td><td>âŒ</td><td>âŒ</td><td>âœ”ï¸</td></tr><tr><td>ä¸²è¡ŒåŒ–</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr></tbody></table><p>ğŸ’¡æ³¨æ„ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œæ•°æ®è¶Šå®‰å…¨ï¼Œä½†æ˜¯æ€§èƒ½è¶Šä½ã€‚â€‹</p></li><li><p>undo log å’Œredo logçš„åŒºåˆ«</p><ul><li><p>ç¼“å†²æ± ï¼ˆbufferpoolï¼‰ï¼šä¸»å†…å­˜ä¸­çš„ä¸€ä¸ªåŒºåŸŸï¼Œé‡Œé¢å¯ä»¥ç¼“å­˜ç£ç›˜ä¸Šç»å¸¸æ“ä½œçš„çœŸå®æ•°æ®ï¼Œåœ¨æ‰§è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œæ—¶ï¼Œå…ˆæ“ä½œç¼“å†²æ± ä¸­çš„æ•°æ®ï¼ˆè‹¥ç¼“å†²æ± æ²¡æœ‰æ•°æ®ï¼Œåˆ™ä»ç£ç›˜åŠ è½½å¹¶ç¼“å­˜ï¼‰ï¼Œä»¥ä¸€å®šé¢‘ç‡åˆ·æ–°åˆ°ç£ç›˜ï¼Œä»è€Œå‡å°‘ç£ç›˜IOï¼ŒåŠ å¿«å¤„ç†é€Ÿåº¦</p></li><li><p>æ•°æ®é¡µï¼ˆpageï¼‰ï¼šæ˜¯InnoDBå­˜å‚¨å¼•æ“ç£ç›˜ç®¡ç†çš„æœ€å°å•å…ƒï¼Œæ¯ä¸ªé¡µçš„å¤§å°é»˜è®¤ä¸º16KBã€‚é¡µä¸­å­˜å‚¨çš„æ˜¯è¡Œæ•°æ®</p></li></ul><p>**åŒºåˆ«ï¼š**å¯¹äºredo log ï¼ˆé‡åšæ—¥å¿—ï¼‰ï¼Œè®°å½•çš„æ˜¯äº‹åŠ¡æäº¤æ—¶æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ï¼Œç”¨æ¥å®ç°äº‹åŠ¡çš„æŒä¹…æ€§ã€‚</p><p>è¯¥æ—¥å¿—æ–‡ä»¶ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé‡åšæ—¥å¿—ç¼“å†²ï¼ˆredologbufferï¼‰ä»¥åŠé‡åšæ—¥å¿—æ–‡ä»¶ï¼ˆredolog fileï¼‰ï¼Œå‰è€…æ˜¯åœ¨å†…å­˜ä¸­ï¼Œåè€…åœ¨ç£ç›˜ä¸­ã€‚</p><p>å½“äº‹åŠ¡æäº¤ä¹‹åä¼šæŠŠæ‰€æœ‰ä¿®æ”¹ä¿¡æ¯éƒ½å­˜åˆ°è¯¥æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œç”¨äºåœ¨åˆ·æ–°è„é¡µåˆ°ç£ç›˜ï¼Œå‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¿›è¡Œæ•°æ®æ¢å¤ä½¿ç”¨ã€‚</p><p>**åŒºåˆ«ï¼š**å¯¹äºundo logï¼ˆå›æ»šæ—¥å¿—ï¼‰ï¼Œç”¨äºè®°å½•æ•°æ®è¢«ä¿®æ”¹å‰çš„ä¿¡æ¯ï¼Œä½œç”¨åŒ…å«ä¸¤ä¸ªï¼šæä¾›å›æ»šå’ŒMVCC(å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)ã€‚undologå’Œredologè®°å½•ç‰©ç†æ—¥å¿—ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯é€»è¾‘æ—¥å¿—ã€‚</p></li></ol><p>â€‹å¯ä»¥è®¤ä¸ºå½“deleteä¸€æ¡è®°å½•æ—¶ï¼Œundologä¸­ä¼šè®°å½•ä¸€æ¡å¯¹åº”çš„insertè®°å½•ï¼Œåä¹‹äº¦ç„¶ï¼Œå½“updateä¸€æ¡è®°å½•æ—¶ï¼Œå®ƒè®°å½•ä¸€æ¡å¯¹åº”ç›¸åçš„updateè®°å½•ã€‚</p><p>â€‹å½“æ‰§è¡Œrollbackæ—¶ï¼Œå°±å¯ä»¥ä»undologä¸­çš„é€»è¾‘è®°å½•è¯»å–åˆ°ç›¸åº”çš„å†…å®¹å¹¶è¿›è¡Œå›æ»šã€‚</p><p>æ€»ç»“ï¼š</p><ul><li>redologï¼šè®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼ŒæœåŠ¡å®•æœºå¯ç”¨æ¥åŒæ­¥æ•°æ®</li><li>undologï¼šè®°å½•çš„æ˜¯é€»è¾‘æ—¥å¿—ï¼Œå½“äº‹åŠ¡å›æ»šæ—¶ï¼Œé€šè¿‡é€†æ“ä½œæ¢å¤åŸæ¥çš„æ•°æ®</li><li>redologä¿è¯äº†äº‹åŠ¡çš„<strong>æŒä¹…æ€§</strong>ï¼Œundologä¿è¯äº†äº‹åŠ¡çš„<strong>åŸå­æ€§å’Œä¸€è‡´æ€§</strong></li></ul><h3 id="2-3äº‹åŠ¡çš„éš”ç¦»æ€§ã€">2.3äº‹åŠ¡çš„éš”ç¦»æ€§ã€</h3><ol start="5"><li>äº‹åŠ¡çš„éš”ç¦»æ€§æ€ä¹ˆè§£å†³ï¼Ÿ</li></ol><ul><li>æ’ä»–é”</li><li>mvccå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶</li></ul><p>è§£é‡Šä¸€ä¸‹mvccï¼</p><p>MVCC</p><p>å®šä¹‰ï¼šMySQLä¸­çš„å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚æŒ‡ç»´æŠ¤ä¸€ä¸ªæ•°æ®çš„å¤šä¸ªç‰ˆæœ¬ï¼Œä½¿å¾—è¯»å†™æ“ä½œæ²¡æœ‰å†²çª</p><ul><li>éšè—å­—æ®µ</li></ul><p>â€‹â‘ trx_idï¼ˆäº‹åŠ¡id)ï¼Œè®°å½•æ¯ä¸€æ¬¡æ“ä½œçš„äº‹åŠ¡idï¼Œæ˜¯è‡ªå¢çš„</p><p>â€‹â‘¡roll_pointer(å›æ»šæŒ‡é’ˆ)ï¼ŒæŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„äº‹åŠ¡ç‰ˆæœ¬è®°å½•åœ°å€</p><ul><li>undo log</li></ul><p>â€‹â‘ å›æ»šæ—¥å¿—ï¼Œå­˜å‚¨è€ç‰ˆæœ¬æ•°æ®</p><p>â€‹â‘¡ç‰ˆæœ¬é“¾ï¼šå¤šä¸ªäº‹åŠ¡å¹¶è¡Œæ“ä½œæŸä¸€è¡Œè®°å½•ï¼Œè®°å½•ä¸åŒäº‹åŠ¡ä¿®æ”¹æ•°æ®çš„ç‰ˆæœ¬ï¼Œé€šè¿‡roll_pointeræŒ‡é’ˆå½¢æˆä¸€ä¸ªé“¾è¡¨</p><ul><li>readViewè§£å†³çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡æŸ¥è¯¢é€‰æ‹©ç‰ˆæœ¬çš„é—®é¢˜<ul><li>æ ¹æ®readViewçš„åŒ¹é…è§„åˆ™å’Œå½“å‰çš„ä¸€äº›äº‹åŠ¡idåˆ¤æ–­è¯¥è®¿é—®é‚£ä¸ªç‰ˆæœ¬çš„æ•°æ®</li><li>ä¸åŒçš„éš”ç¦»çº§åˆ«å¿«ç…§è¯»æ˜¯ä¸ä¸€æ ·çš„ï¼Œæœ€ç»ˆçš„è®¿é—®çš„ç»“æœä¸ä¸€æ ·<ul><li>RCï¼šæ¯ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”ŸæˆReadView</li><li>RRï¼šä»…åœ¨äº‹åŠ¡ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”ŸæˆReadViewï¼Œåç»­å¤ç”¨</li></ul></li></ul></li></ul><h2 id="3å…¶ä»–é—®é¢˜">3å…¶ä»–é—®é¢˜</h2><h3 id="3-1ä¸»ä»åŒæ­¥">3.1ä¸»ä»åŒæ­¥</h3><ul><li>äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBINLOGï¼‰è®°å½•äº†æ‰€æœ‰çš„DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰è¯­å¥å’ŒDMLï¼ˆæ•°æ®æ“çºµè¯­è¨€ï¼‰è¯­å¥ï¼Œä½†ä¸åŒ…æ‹¬æ•°æ®æŸ¥è¯¢ï¼ˆSELECTã€SHOWï¼‰è¯­å¥ã€‚</li></ul><p>MySQLä¸»ä»å¤åˆ¶çš„æ ¸å¿ƒå°±æ˜¯äºŒè¿›åˆ¶æ—¥å¿—binlogï¼ˆDDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰è¯­å¥å’ŒDMLï¼ˆæ•°æ®æ“çºµè¯­è¨€ï¼‰è¯­å¥ï¼‰</p><p>â‘ ä¸»åº“åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œä¼šæŠŠæ•°æ®å˜æ›´è®°å½•åœ¨äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶Binlogä¸­ã€‚</p><p>â‘¡ä»åº“è¯»å–ä¸»åº“çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶Binlogï¼Œå†™å…¥åˆ°ä»åº“çš„ä¸­ç»§æ—¥å¿—RelayLogã€‚</p><p>â‘¢ä»åº“é‡åšä¸­ç»§æ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œå°†æ”¹å˜åæ˜ å®ƒè‡ªå·±çš„æ•°æ®</p><h3 id="3-2åˆ†åº“åˆ†è¡¨">3.2åˆ†åº“åˆ†è¡¨</h3><p>ä¸»ä»åŒæ­¥æ˜¯ç”¨æ¥åˆ†æ‹…è®¿é—®å‹åŠ›çš„ï¼Œä¸»å†™ï¼Œä»è¯»ã€‚</p><p>åˆ†åº“åˆ†è¡¨çš„æ—¶æœºï¼š</p><ul><li><p>å•è¡¨çš„æ•°æ®é‡è¾¾åˆ°1000Wæˆ–è€…20Gä»¥å</p></li><li><p>æ•°æ®åº“çš„ç”¨æˆ·é‡å’Œæ•°æ®é‡åˆ°äº†ä¸€å®šæ•°é‡çš„æ—¶å€™ï¼Œä¼˜åŒ–å·²ç»è§£å†³ä¸äº†æ€§èƒ½çš„é—®é¢˜äº†ã€‚</p></li><li><p>ioç“¶é¢ˆã€cpuç“¶é¢ˆ</p></li></ul><h4 id="1-æ‹†åˆ†ç­–ç•¥">1.æ‹†åˆ†ç­–ç•¥</h4><p><strong>å‚ç›´</strong></p><p>å‚ç›´åˆ†åº“ï¼šä»¥è¡¨ä¸ºä¾æ®ï¼Œæ ¹æ®ä¸šåŠ¡å°†ä¸åŒçš„è¡¨æ‹†åˆ†åˆ°ä¸åŒçš„åº“ä¸­ã€‚ï¼ˆå°†åº“ä¸­ä¸åŒä¸šåŠ¡ï¼Œå¦‚ç™»å½•å’Œå•†å“ï¼Œæ‹†åˆ†åˆ°ä¸åŒçš„åº“ä¸­åˆ†åˆ«å­˜å‚¨ï¼‰</p><p>å‚ç›´åˆ†è¡¨ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼Œæ ¹æ®å­—æ®µå±æ€§å°†ä¸åŒçš„å­—æ®µæ‹†åˆ†åˆ°ä¸åŒè¡¨ä¸­ã€‚ï¼ˆè·ç¦»ï¼Œå•†å“çš„è¯¦ç»†ä¿¡æ¯å’Œå•†å“idæ‹†åˆ†ï¼‰</p><ul><li>å†·çƒ­æ•°æ®åˆ†ç¦»</li><li>å‡å°‘ioè¿‡æ¸¡äº‰æŠ¢ã€ä¸¤è¡¨äº’ä¸å½±å“ã€‚</li></ul><p><strong>æ°´å¹³</strong>ï¼ˆä¾‹å¦‚id%3æ¥è¿›è¡Œè¡¨æ ¼çš„è®¿é—®ï¼‰</p><p>æ°´å¹³åˆ†åº“ï¼šå°†ä¸€ä¸ªåº“çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªåº“ä¸­ã€‚ï¼ˆ<strong>æµ·é‡å­˜å‚¨çš„é—®é¢˜</strong>ï¼‰</p><ul><li>è§£å†³å•åº“å¤§æ•°é‡ï¼Œé«˜å¹¶å‘çš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜</li><li>æé«˜äº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç”¨æ€§</li></ul><p>æ°´å¹³åˆ†è¡¨ï¼šå°†ä¸€ä¸ªè¡¨çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ï¼ˆå¯ä»¥åœ¨åŒä¸€ä¸ªåº“å†…ï¼‰</p><h4 id="2-æ–°çš„é—®é¢˜">2.æ–°çš„é—®é¢˜</h4><p>åˆ†åº“åˆ†è¡¨ä¼šå‡ºç°å¾ˆå¤šæ–°çš„é—®é¢˜ï¼Œæ¯”å¦‚å¤šä¸ªè¡¨çš„idå¯èƒ½è‡ªå¢é‡å¤ï¼Œå¤šä¸ªè¡¨å¯èƒ½äº‹åŠ¡æäº¤ä¸ä¸€è‡´ï¼Œå¤šä¸ªè¡¨çš„åˆ†é¡µæ’åºã€è·¨èŠ‚ç‚¹å…³è”æŸ¥è¯¢ç­‰ã€‚<br><strong>ä¸­é—´ä»¶æ¥ä¼˜åŒ–</strong>ï¼š</p><ul><li>sharding-sogere</li><li>mycat</li></ul>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•çŸ¥è¯†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å­¦ä¹ è¿‡ç¨‹</tag>
      
      <tag>æ•°æ®åº“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>redisçŸ¥è¯†æ€»ç»“</title>
    <link href="/pingpinghome/2025/07/23/redis%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"/>
    <url>/pingpinghome/2025/07/23/redis%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1>redis</h1><h2 id="ä¸€ã€redisä¸‰å…„å¼Ÿ">ä¸€ã€redisä¸‰å…„å¼Ÿ</h2><ul><li>ç©¿é€</li><li>å‡»ç©¿</li><li>é›ªå´©</li></ul><h3 id="ç©¿é€"><strong>ç©¿é€</strong></h3><p>ç©¿é€æ˜¯æŒ‡ï¼ŒæŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼ŒmysqlæŸ¥è¯¢ä¸åˆ°ï¼Œä¹Ÿä¸ä¼šå†™å…¥ç¼“å­˜ï¼Œå¯¼è‡´æ¯ä¸€æ¬¡è¯·æ±‚éƒ½ä¼šæŸ¥è¯¢æ•°æ®åº“ï¼Œå¤§é‡çš„è¯·æ±‚å¯¼è‡´å®•æœºã€‚</p><p>åŸå› æ˜¯ï¼šâ‘ ï¼šå¯èƒ½æ˜¯è·¯å¾„è¢«äººæ¶æ„æ”»å‡»ï¼Œredisæ²¡æœ‰ç›¸å¯¹åº”çš„æ•°æ®ï¼Œæ‰€ä»¥å»æŸ¥è¯¢æ•°æ®åº“ï¼Œä½†å¤§é‡çš„æŸ¥è¯¢æ“ä½œæ‰§è¡Œçš„æ—¶å€™ï¼Œæ•°æ®åº“å°±ä¼šè¢«å‹å®ã€‚</p><p>è§£å†³ï¼š</p><ul><li>å¸ƒéš†è¿‡æ»¤å™¨</li><li>nullè¿”å›</li></ul><p><img src="https://qjw-00.oss-cn-guangzhou.aliyuncs.com/%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8.jpg" alt=""></p><h3 id="å‡»ç©¿"><strong>å‡»ç©¿</strong></h3><p>å‡»ç©¿æ˜¯æŒ‡ï¼Œå½“æŸä¸€ä¸ªkeyè¿‡æœŸçš„æ—¶å€™ï¼Œå¤§é‡è¯·æ±‚æ— æ³•åœ¨redisä¸­æŸ¥è¯¢ï¼Œè½¬è€Œå»æ•°æ®åº“æŸ¥è¯¢ï¼Œä¸€æ—¶é—´å¤§é‡çš„æŸ¥è¯¢å¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§ã€‚</p><p>åŸå› æ˜¯ï¼šâ‘ ï¼škeyè¿‡æœŸäº†</p><p>è§£å†³ï¼š</p><ul><li>åŠ é”ï¼Œåˆ†å¸ƒå¼é”ã€‚<strong>äº’æ–¥é”</strong>ï¼ˆä¿è¯å¼ºä¸€è‡´æ€§ã€æ€§èƒ½å·®ä¸€ç‚¹ï¼‰</li><li>é€»è¾‘è¿‡æœŸï¼ˆé«˜å¯ç”¨ã€æ€§èƒ½ä¼˜ï¼‰</li></ul><p><img src="https://qjw-00.oss-cn-guangzhou.aliyuncs.com/%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8/%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF.jpg" alt=""></p><h3 id="é›ªå´©"><strong>é›ªå´©</strong></h3><p>é›ªå´©æ˜¯æŒ‡åœ¨åŒä¸€æ—¶é—´æ®µå¤§é‡çš„ç¼“å­˜keyåŒæ—¶å¤±æ•ˆï¼Œæˆ–è€…rediså®•æœºï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚åˆ°æ•°æ®åº“ï¼Œå¸¦æ¥å·¨å¤§çš„å‹åŠ›ã€‚</p><p>åŸå› ï¼škeyå¤±æ•ˆï¼Œrediså®•æœº</p><p>è§£å†³ï¼š</p><ul><li>ç»™ä¸åŒçš„keyè®¾ç½®TTLéšæœºè¿‡æœŸå€¼</li><li>åˆ©ç”¨redisé›†ç¾¤æé«˜æœåŠ¡çš„å¯ç”¨æ€§       <strong>å“¨å…µæ¨¡å¼ï¼Œé›†ç¾¤æ¨¡å¼</strong></li><li>ç»™ç¼“å­˜ä¸šåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥            <strong>ngxinæˆ–spring cloud gateway</strong></li><li>å¤šçº§ç¼“å­˜                                               <strong>guavaæˆ–è€…caffeine</strong></li></ul><h2 id="äºŒã€åŒå†™ä¸€è‡´æ€§ï¼ˆrediså’Œæ•°æ®åº“ï¼‰">äºŒã€åŒå†™ä¸€è‡´æ€§ï¼ˆrediså’Œæ•°æ®åº“ï¼‰</h2><p><strong>è¿™ç§é—®é¢˜è¦ç»“åˆä¸šåŠ¡è¿›è¡Œå›ç­”ï¼Œåˆ‡è®°åˆ‡è®°</strong></p><h3 id="åŒå†™ä¸€è‡´æ€§">åŒå†™ä¸€è‡´æ€§</h3><p>å½“ä¿®æ”¹äº†æ•°æ®åº“çš„æ•°æ®æ—¶ï¼Œéœ€è¦åŒæ—¶å»æ›´æ–°ç¼“å­˜çš„æ•°æ®ï¼Œç¼“å­˜è¦å’Œæ•°æ®åº“çš„æ•°æ®ä¿æŒä¸€è‡´</p><p>è¯»æ“ä½œï¼šè¯»å–å‘½ä¸­ç›´æ¥è¿”å›ï¼Œä¸å‘½ä¸­æŸ¥è¯¢æ•°æ®åº“ï¼Œå†™å…¥ç¼“å­˜ï¼Œå†è¿”å›ã€‚</p><p>å†™æ“ä½œï¼š<strong>å»¶è¿ŸåŒåˆ </strong></p><p>æˆ‘ä»¬è¦å»¶è¿ŸåŒåˆ ï¼ˆåˆ é™¤ç¼“å­˜â†’åˆ é™¤æ•°æ®åº“â†’åˆ é™¤ç¼“å­˜ï¼‰ï¼ŒåŸå› æ˜¯æ•°æ®åº“åŒå†™ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p><h3 id="éœ€è¦å¼ºä¸€è‡´çš„è¯"><strong>éœ€è¦å¼ºä¸€è‡´çš„è¯</strong></h3><p>åˆ†å¸ƒå¼é”ï¼š</p><p><strong>åœ¨è¯»çš„æ—¶å€™æ·»åŠ å…±äº«é”ï¼Œå†å†™çš„æ—¶å€™æ·»åŠ æ’å®ƒé”ã€‚</strong></p><p>å…±äº«é”ï¼šå…¶ä»–çº¿ç¨‹ä¹Ÿå¯ä»¥è¯»</p><p>æ’å®ƒé”ï¼šå…¶ä»–çº¿ç¨‹æ— æ³•è¿›è¡Œè¯»å†™æ“ä½œ</p><p><strong>ç‰¹ç‚¹</strong>ï¼šå¼ºä¸€è‡´æ€§ï¼Œæ€§èƒ½ä½</p><h3 id="ä¸éœ€è¦å¼ºä¸€è‡´æ€§çš„è¯ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰"><strong>ä¸éœ€è¦å¼ºä¸€è‡´æ€§çš„è¯ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</strong></h3><p><strong>å¼‚æ­¥é€šçŸ¥ï¼šMQå’Œcanal</strong></p><p>cannalï¼šå¯¹ä»£ç æ— ä¾µå…¥ï¼Œä¼ªè£…mysqlçš„ä¸€ä¸ªä»èŠ‚ç‚¹</p><ul><li>ä¸»è¦æ˜¯ç›‘å¬binlogæ–‡ä»¶ï¼Œå½“æ•°æ®åº“æ”¹å˜çš„æ—¶å€™ï¼Œå°±ä¼šé€šçŸ¥ç¼“å­˜å˜æ›´æƒ…å†µã€‚è¿›è¡Œæ•°æ®æ›´æ–°ã€‚</li></ul><p>MQï¼šä¸»è¦ä¾é  MQçš„å¯é æ€§</p><ul><li>ä¿®æ”¹æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰æ¶ˆæ¯é€šçŸ¥MQï¼Œç„¶åMQç›‘å¬ç¼“å­˜è¿›è¡Œæ•°æ®æ›´æ–°ã€‚</li></ul><h2 id="ä¸‰ã€æŒä¹…åŒ–">ä¸‰ã€æŒä¹…åŒ–</h2><h3 id="RDB">RDB</h3><p>RDBï¼šä¹Ÿå°±æ˜¯redisçš„å¿«ç…§ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠå†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®å†™å…¥åˆ°ç£ç›˜ä¸­ã€‚å½“redisæ•…éšœé‡å¯çš„æ—¶å€™ï¼Œä»ç£ç›˜è¯»å–å¿«ç…§ï¼Œæ¢å¤æ•°æ®</p><p>ä¿å­˜å‘½ä»¤ï¼š</p><ul><li><p>saveï¼šä¸»è¿›ç¨‹æ‰§è¡Œï¼Œ</p></li><li><p>bgsave:å­ç¨‹åºè¿›è¡Œè¿è¡Œï¼Œé¿å…ä¸»ç¨‹åºæ”¶åˆ°å½±å“ï¼ˆforkï¼‰ï¼Œå­è¿›ç¨‹<strong>å…±äº«</strong>ä¸»è¿›ç¨‹çš„å†…å­˜æ•°æ®ã€‚åŸå› æ˜¯é¡µè¡¨ç›¸åŒæ˜ å°„ã€‚</p><p>é¡µè¡¨ï¼šè®°å½•è™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»ã€‚</p></li><li></li></ul><h3 id="AOF">AOF</h3><p>AOFå…¨ç§°ä¸ºappend only Fileï¼ˆè¿½åŠ æ–‡ä»¶ï¼‰ã€‚rediså¤„ç†çš„æ¯ä¸€ä¸ªå†™å‘½ä»¤éƒ½ä¼šè®°å½•åœ¨AOFæ–‡ä»¶ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å‘½ä»¤æ—¥å¿—æ–‡ä»¶ã€‚</p><p>é»˜è®¤æ˜¯å…³é—­çš„ï¼Œredis.confæ¥å¼€å¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä»¶æ¥ä¿®æ”¹é¢‘ç‡ã€‚</p><ul><li>alwaysï¼šåŒæ­¥åˆ·ç›˜ï¼ˆå¯é æ€§é«˜ï¼Œå‡ ä¹ä¸ä¸¢å¤±æ•°æ®ï¼Œä½†æ€§èƒ½å½±å“å¤§ï¼‰</li><li>everysecï¼šæ¯ç§’åˆ·ç›˜ï¼ˆé€‚ä¸­ï¼Œæœ€å¤šä¸¢å¤±ä¸€ç§’çš„æ•°æ®ï¼‰</li><li>noï¼šæ“ä½œç³»ç»Ÿæ§åˆ¶ï¼ˆæ€§èƒ½æœ€é«˜ï¼Œå¯é æ€§å·®ï¼Œå¯èƒ½ä¸¢å¤±å¤§é‡æ•°æ®ã€‚</li></ul><p>AOFçš„æ–‡ä»¶æ¯”RDBå¤§ï¼Œä¼šè®°å½•ä¸€ä¸ªkeyçš„å¤šæ¬¡æ“ä½œä½†<strong>åªæœ‰æœ€åä¸€æ¬¡æ“ä½œæœ‰æ•ˆ</strong>ï¼Œé€šè¿‡æ‰§è¡Œbgrewriteaofæ¥è¿›è¡Œæ–‡ä»¶é‡å†™ï¼Œç”¨æœ€å°‘çš„å‘½ä»¤è¾¾åˆ°ä¸€æ ·çš„æ•ˆæœã€‚</p><p>redisåœ¨è§¦å‘é˜ˆå€¼æ—¶ä¼šè‡ªåŠ¨å»é‡å†™AOFæ–‡ä»¶ã€‚é˜ˆå€¼åŒæ ·å¯ä»¥è¿›è¡Œè®¾ç½®ã€‚</p><h3 id="ä¸¤è€…çš„åŒºåˆ«">ä¸¤è€…çš„åŒºåˆ«</h3><p>ä¸»è¦ä¼˜ç¼ºç‚¹ï¼ŒRDBæ–‡ä»¶å°ï¼ŒäºŒè¿›åˆ¶ï¼Œé€Ÿåº¦å¿«ï¼Œä½†æ˜¯æœ‰ä¸¢å¤±çš„é£é™©ã€‚AOFæ–‡ä»¶å¤§ã€é€Ÿåº¦æ…¢ï¼Œä½†æ˜¯é£é™©å°ã€‚</p><p><img src="https://qjw-00.oss-cn-guangzhou.aliyuncs.com/%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8/RDB%E5%92%8CAOF%E7%9A%84%E5%8C%BA%E5%88%AB.jpg" alt=""></p><h2 id="å››ã€æ•°æ®è¿‡æœŸç­–ç•¥">å››ã€æ•°æ®è¿‡æœŸç­–ç•¥</h2><p>ä½†keyè¿‡æœŸçš„æ—¶å€™ï¼Œredisä¼šç«‹åˆ»åˆ é™¤å—ï¼Ÿ</p><p>å¹¶ä¸ä¼šï¼åˆ é™¤ç­–ç•¥æœ‰ä¸¤ç§ï¼Œæƒ°æ€§åˆ é™¤å’Œå®šæ—¶åˆ é™¤ã€‚</p><h3 id="1-æƒ°æ€§åˆ é™¤">1. æƒ°æ€§åˆ é™¤</h3><p>å½“æˆ‘ä»¬è®¾ç½®äº†è¿‡æœŸæ—¶é—´ä¹‹åï¼Œæˆ‘ä»¬å°±ä¸å»ç®¡å®ƒäº†ï¼Œ<strong>åªæœ‰ç”¨åˆ°è¿™ä¸ªkeyçš„æ—¶å€™æ‰ä¼šå»åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤</strong>ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šå¯¹cpuå¾ˆå‹å¥½ï¼Œåªæœ‰ä½¿ç”¨çš„æ—¶å€™æ‰ä¼šå»è°ƒç”¨è¿‡æœŸæ£€æŸ¥ï¼ŒèŠ‚çœèµ„æº</li><li>ç¼ºç‚¹ï¼šå¯¹å†…å­˜å¾ˆä¸å‹å¥½ï¼Œè‹¥æ˜¯ä¸è°ƒç”¨ï¼Œå®ƒå°±ä¸€ç›´å‘†åœ¨å†…å­˜ä¹‹ä¸­ï¼Œæµªè´¹å†…å­˜ã€‚</li></ul><h3 id="2-å®šæ—¶åˆ é™¤">2. å®šæ—¶åˆ é™¤</h3><p>æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°±å¯¹ä¸€äº›keyè¿›è¡Œæ£€æŸ¥ï¼Œåˆ é™¤é‡Œé¢çš„è¿‡æœŸkeyï¼ˆä»ä¸€å®šé‡çš„æ•°æ®åº“ä¸­ï¼Œå–å‡ºä¸€å®šæ•°é‡çš„<strong>éšæœº</strong>keyè¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åˆ é™¤è¿‡æœŸçš„keyï¼‰</p><h4 id="2-1-SLOW">2.1 SLOW</h4><p>æ…¢æ¨¡å¼ï¼Œå®šæ—¶åˆ é™¤ï¼Œæ¯æ¬¡åˆ é™¤çš„é—´éš”ä¸º10hzï¼Œä¹Ÿå°±æ˜¯ä¸€ç§’åæ¬¡ï¼ˆ100ms/æ¬¡ï¼‰ï¼Œæ¯æ¬¡ä¸è¶…è¿‡25msï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„HZé€‰é¡¹è¿›è¡Œè®¾ç½®ï¼Œæ¥è°ƒæ•´</p><h4 id="2-2-FAST">2.2 FAST</h4><p>å¿«æ¨¡å¼ï¼Œæ‰§è¡Œçš„é¢‘ç‡ä¸å›ºå®šï¼Œä½†æ‰§è¡Œé—´éš”ä¸ä½äº2msï¼Œæ¯æ¬¡è€—æ—¶1msã€‚</p><h4 id="2-3-ä¼˜ç¼ºç‚¹">2.3 ä¼˜ç¼ºç‚¹</h4><p>æœ‰ç‚¹ï¼šé€šè¿‡é™åˆ¶é¢‘ç‡æ¥å‡å°‘å¯¹äºcpuçš„å½±å“ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é‡Šæ”¾å†…å­˜</p><p>ç¼ºç‚¹ï¼šéš¾ä»¥ç¡®å®šåˆ é™¤æ“ä½œçš„é¢‘ç‡å’Œæ—¶é•¿ã€‚</p><h2 id="äº”ã€æ•°æ®æ·˜æ±°ç­–ç•¥">äº”ã€æ•°æ®æ·˜æ±°ç­–ç•¥</h2><p>å‡å¦‚ç¼“å­˜è¿‡å¤šï¼Œå†…å­˜æ»¡äº†æ€ä¹ˆåŠï¼Ÿ</p><h3 id="æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š8ç§">æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š8ç§</h3><ul><li><p>noevictionï¼šé»˜è®¤ï¼Œè¡¨ç¤ºå½“å†…å­˜æ»¡çš„æ—¶å€™ä¸å†æ·»åŠ æ–°çš„key</p></li><li><p>volatile-ttlï¼šå¯¹è®¾ç½®äº†ttlçš„keyè¿›è¡Œåˆ¤æ–­ï¼Œè¶Šå°ï¼Œå°±è¶Šå…ˆè¢«æ·˜æ±°</p></li><li><p>allkeys-randomï¼šå¯¹æ‰€æœ‰çš„keyè¿›è¡Œéšæœºæ·˜æ±°</p></li><li><p>volatile-randomï¼šå¯¹è®¾ç½®äº†ttlçš„keyè¿›è¡Œéšæœºåˆ¤æ–­</p></li><li><p>allkeys-lruï¼šå¯¹æ‰€æœ‰çš„keyæ‰§è¡Œlruç­–ç•¥ï¼Œæœ€åä¸€æ¬¡è®¿é—®è¶Šä¹…è¶Šå…ˆæ·˜æ±°</p></li><li><p>volatile-lruï¼šå¯¹è®¾ç½®äº†ttlçš„keyæ‰§è¡Œlruç­–ç•¥ã€‚</p></li><li><p>allkeys-lfuï¼šå¯¹æ‰€æœ‰çš„keyæ‰§è¡Œlfuç­–ç•¥ï¼Œè®¿é—®æ¬¡æ•°è¶Šå°‘çš„ï¼Œè¶Šå…ˆæ·˜æ±°</p></li><li><p>volatile-lfuï¼šå¯¹è®¾ç½®äº†ttlçš„keyæ‰§è¡Œlfuç­–ç•¥ï¼Œè®¿é—®æ¬¡æ•°è¶Šå°‘çš„ï¼Œè¶Šå…ˆæ·˜æ±°</p></li></ul><p><strong>é‡ç‚¹åœ¨äºï¼Œè¦è®°ä½lruç­–ç•¥å’Œlfuç­–ç•¥ã€‚lruï¼ˆrecentlyæœ€å°‘æœ€è¿‘ï¼‰lfuï¼ˆfrequentlyç†Ÿæ‚‰çš„æœ€å°‘è¯„ç‡ï¼‰</strong></p><p>å¯¹äºä½¿ç”¨ä»€ä¹ˆç­–ç•¥çš„å»ºè®®ã€‚</p><ul><li>ä¼˜å…ˆä½¿ç”¨<strong>allkeys-lru</strong>æ¥è¿›è¡Œæ·˜æ±°ï¼Œå¦‚æœä¸šåŠ¡æœ‰æ˜æ˜¾çš„å†·çƒ­æ•°æ®åŒºåˆ†ï¼Œæ¨èè¿™ä¸ªæ–¹æ³•</li><li>å¦‚æœä¸šåŠ¡ä¸­çš„æ•°æ®æ²¡æœ‰å†·çƒ­åŒºåˆ†ï¼Œè®¿é—®çš„é¢‘ç‡ä¹Ÿå·®ä¸å¤šï¼Œæ¨èç”¨<strong>allkeys-random</strong></li><li>å¦‚æœä¸šåŠ¡ä¸­æœ‰ç½®é¡¶çš„éœ€æ±‚ï¼Œé‚£å°±å¯ä»¥ç”¨<strong>volatile-lru</strong>ï¼Œå¯¹ç½®é¡¶æ•°æ®ä¸è¿›è¡Œttlçš„è®¾ç½®ï¼Œåªä¼šæ·˜æ±°å…¶ä»–æ•°æ®ã€‚</li><li>å¦‚æœæ—¶çŸ­æ—¶é«˜é¢‘çš„éœ€æ±‚ï¼Œç”¨<strong>lfu</strong>çš„ä¸¤ä¸ªç­–ç•¥ã€‚</li></ul><h3 id="é—®é¢˜ï¼š">é—®é¢˜ï¼š</h3><p>1.æ•°æ®åº“æœ‰1000ä¸‡çš„æ•°æ®ï¼Œredisåªèƒ½å­˜20ä¸‡ï¼Œå¦‚ä½•ä¿è¯redisä¸­éƒ½æ˜¯çƒ­ç‚¹æ•°æ®å‘¢ï¼Ÿ</p><p>ç­”ï¼šç”¨allkeys-lruæ¥è¿›è¡Œæ·˜æ±°ï¼Œåˆ é™¤æœ€é•¿æ—¶é—´è®¿é—®çš„æ•°æ®ï¼Œä¿ç•™çƒ­æ•°æ®ã€‚</p><p>2.redisçš„å†…å­˜ç”¨å®Œäº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>ç­”ï¼šæ•°æ®æ·˜æ±°ï¼Œçœ‹ä½ æ˜¯ä»€ä¹ˆè®¾ç½®ï¼Œå¦‚æœæ˜¯é»˜è®¤norvictionä¼šç›´æ¥æŠ¥é”™ã€‚</p><h2 id="å…­ã€åˆ†å¸ƒå¼é”">å…­ã€åˆ†å¸ƒå¼é”</h2><h3 id="1-å¯¼è¯»">1. å¯¼è¯»</h3><p>ä¾‹å­ï¼ŒæŠ¢å·æœåŠ¡ï¼Œä¼šå‘˜å…‘æ¢ç ç­‰</p><p>å¦‚æœæœ‰æœ€åä¸€å¼ å·ï¼Œç»“æœæ˜¯ä¸¤ä¸ªè¿›ç¨‹æŸ¥è¯¢åˆ°äº†å·ï¼Œå…ˆåè·å¾—äº†ä¼˜æƒ å·ï¼Œæœ€åä¼šå¯¼è‡´ç¥¨æ•°è¶…é™ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åŠ é”ã€‚</p><p>å¦‚æœæ˜¯ä¸€å°æœåŠ¡å™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨synchronizedï¼ˆthisï¼‰{}æ¥è¿›è¡Œé”çš„é™åˆ¶ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>** ä½†æ˜¯ï¼ï¼ï¼**åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„ç¨‹åºæ—¶éƒ¨ç½²åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸­çš„ï¼Œè¿™ä¸ªæ—¶å€™synchronizedé”å°±åªèƒ½åœ¨ä¸€å°æœåŠ¡å™¨ä¸­ä½¿ç”¨ï¼Œæ— æ³•é˜²æ­¢ä¸Šè¿°è¶…é™çš„é—®é¢˜å‘ç”Ÿã€‚</p><p>è¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°åˆ†å¸ƒå¼é”ã€‚</p><p>åŸç†ï¼š</p><p>åˆ†å¸ƒå¼é”çš„åŸç†å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯æ‹¿ä¸€ä¸ªä¸­é—´äººä½œä¸ºé”çš„ç®¡ç†ï¼Œç”±å®ƒæ¥ç›‘æ§é”ã€‚è¿™é‡Œç”¨çš„æ˜¯redisã€‚å½“8080æœåŠ¡å™¨è·å–é”æˆåŠŸåï¼Œå°±ç»™åˆ†å¸ƒå¼é”åšä¸ªæ ‡è®°ï¼Œå‘Šè¯‰åˆ†å¸ƒå¼é”8080ä¸­çš„çº¿ç¨‹1å·²ç»è·å–é”äº†ã€‚</p><p>æ­¤åï¼Œå…¶ä»–æœåŠ¡å™¨8081æƒ³è¦è·å¾—é”ï¼Œåˆ†å¸ƒå¼é”å°±ä¼šæ‹’ç»è¿™ä¸ªè¯·æ±‚ï¼ŒåŠ é”å¤±è´¥ï¼Œç¨‹åºè¿›å…¥é˜»å¡çŠ¶æ€ã€‚</p><h3 id="2-redissionå®ç°">2. redissionå®ç°</h3><h4 id="2-1-rediså®ç°çš„åˆ†å¸ƒå¼é”">2.1 rediså®ç°çš„åˆ†å¸ƒå¼é”</h4><p>å¯¹äºrediså®ç°åˆ†å¸ƒå¼é”æ¥è¯´ï¼Œç”¨çš„æ˜¯setNXæ¥è¿›è¡Œè®¾ç½®</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cmd">//è·å¾—é”<br><span class="hljs-built_in">SET</span> lock value NX EX <span class="hljs-number">10</span><br>//é‡Šæ”¾é”<br><span class="hljs-built_in">DEL</span> key<br></code></pre></td></tr></table></figure><p>EXæ¥è®¾ç½®å®ƒçš„è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆå°±æœ‰æ–°çš„é—®é¢˜ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¤šå°‘åˆé€‚ï¼Ÿ</p><p>è§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼šâ‘ é¢„ä¼°æœåŠ¡çš„æ—¶é—´ååˆ¤æ–­ â‘¡çœ‹é—¨ç‹—è‡ªåŠ¨ç»­æœŸ</p><p>æ˜¾ç„¶æ˜¯ç¬¬äºŒä¸ªå•Šï¼Œçœ‹é—¨ç‹—æœºåˆ¶æ¥å»¶é•¿æœåŠ¡çš„æ—¶é—´ï¼Œé˜²æ­¢æœåŠ¡è¿‡æœŸã€‚ä¸€èˆ¬è¿™ä¸ªç»­æœŸçš„æ—¶é—´æ˜¯æœåŠ¡è®¾ç½®æ—¶é—´çš„1/3ã€‚çœ‹é—¨ç‹—éœ€è¦æ‰‹åŠ¨å»é€šçŸ¥åœæ­¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">redisLock</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> InterruptedException&#123;<br>    <span class="hljs-comment">//è·å–é”ï¼ˆé‡å…¥é”ï¼‰ï¼Œæ‰§è¡Œé”çš„åç§°</span><br>    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock( s:<span class="hljs-string">&quot;heimalock&quot;</span>);<br>    <span class="hljs-comment">//å°è¯•è·å–é”ï¼Œå‚æ•°åˆ†åˆ«æ˜¯ï¼šè·å–é”çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆæœŸé—´ä¼šé‡è¯•ï¼‰ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ï¼Œæ—¶é—´å•ä½</span><br>    <span class="hljs-comment">//boolean isLock = lock.tryLock(10,30ï¼ŒTimeUnit.SEC0NDS);</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">isLock</span> <span class="hljs-operator">=</span> lock.tryLock(time:<span class="hljs-number">10</span>ï¼ŒTimeUnit.SEC0NDS);<br>    <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦è·å–æˆåŠŸåŠ é”ã€è®¾ç½®è¿‡æœŸæ—¶é—´ç­‰æ“ä½œéƒ½æ˜¯åŸºäºluaè„šæœ¬å®Œæˆ</span><br>    <span class="hljs-keyword">if</span> ï¼ˆisLockï¼‰&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            System.out.printlnï¼ˆ<span class="hljs-string">&quot;æ‰§è¡Œä¸šåŠ¡&quot;</span>ï¼‰;<br>        &#125;<br>        <span class="hljs-keyword">finally</span><br>    &#123;<br>            <span class="hljs-comment">//é‡Šæ”¾é”</span><br>            lock.unlock();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ğŸ’¡**æ³¨æ„:**å¦‚æœæ‰‹åŠ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆçœ‹é—¨ç‹—æœºåˆ¶å°±ä¼šå¤±æ•ˆï¼Œredisè®¤ä¸ºä½ å¯ä»¥è‡ªå·±ç®¡ç†æ—¶é—´ã€‚é»˜è®¤30så…³é—­æ—¶é—´ã€‚</p><p>ğŸ’¡**æ³¨æ„:**åœ¨åº•å±‚ä¸­æ˜¯ç”¨SETNXå’Œluaè„šæœ¬å®ç°çš„ã€‚</p><h4 id="2-2-redissonå®ç°çš„åˆ†å¸ƒå¼é”">2.2 redissonå®ç°çš„åˆ†å¸ƒå¼é”</h4><p>ğŸ’¡ï¼šredissonä¸­çš„åˆ†å¸ƒå¼é”æ˜¯å¯ä»¥é‡å…¥çš„ï¼Œè€Œredisä¸å¯ä»¥ã€‚</p><p>é‡å…¥é”æ˜¯ä¸€ç§ç´¯è®¡çš„é‡å…¥æ¬¡æ•°å€¼ã€‚</p><p>å…¶ä¸­keyæ˜¯è‡ªå·±å®šä¹‰çš„å”¯ä¸€æ ‡è¯†ï¼Œè€Œvalueæ˜¯é‡å…¥çš„ä¸ªæ•°ã€‚</p><p>åˆ†å¸ƒå¼é”å¦‚ä½•è§£å†³ä¸€è‡´æ€§çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>åœ¨æœåŠ¡å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œrediså®•æœºäº†ï¼Œå¯¼è‡´æ•°æ®æ— æ³•æ­£å¸¸æ“ä½œï¼Œè¿™æ˜¯åæŒ‰ç…§redisçš„æœºåˆ¶ï¼ŒæŒ‘é€‰ä»èŠ‚ç‚¹æˆä¸ºä¸»èŠ‚ç‚¹ã€‚æ­¤æ—¶ï¼Œå°±ä¼šå‡ºç°ä¸¤ä¸ªçº¿ç¨‹æœ‰åŒä¸€ä¸ªé”ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œredisæä¾›äº†çº¢é”ã€‚ï¼ˆN/2  +1 ï¼‰åœ¨å¤šä¸ªå®ä¾‹ä¸Šé¢åŠ é”ï¼Œä»è€Œé¿å…è¿™ä¸ªé—®é¢˜ã€‚ï¼ˆå¾ˆå°‘ç”¨ï¼Œæ€§èƒ½å¾ˆå·®ï¼Œè€Œä¸”å¾ˆå¤æ‚ï¼Œå¾ˆç¹çã€‚ï¼‰å¦‚æœéè¦ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ä½¿ç”¨zookeeperæ¥å®ç°ã€‚</p><h2 id="ä¸ƒã€redisé›†ç¾¤æ–¹æ¡ˆ">ä¸ƒã€redisé›†ç¾¤æ–¹æ¡ˆ</h2><h3 id="åˆ†ç±»">åˆ†ç±»</h3><ul><li>ä¸»ä»å¤åˆ¶</li><li>å“¨å…µæ¨¡å¼</li><li>Redisåˆ†ç‰‡é›†ç¾¤</li></ul><h3 id="ä¸»ä»å¤åˆ¶">ä¸»ä»å¤åˆ¶</h3><p><strong>ä»‹ç»ä¸€ä¸‹ä¸»ä»å¤åˆ¶ï¼Ÿ</strong></p><p>å•èŠ‚ç‚¹Redisçš„å¹¶å‘èƒ½åŠ›æ˜¯æœ‰ä¸Šé™çš„ï¼Œè¦è¿›ä¸€æ­¥æé«˜Redisçš„å¹¶å‘èƒ½åŠ›ï¼Œå¯ä»¥æ­å»ºä¸»ä»é›†ç¾¤ï¼Œå®ç°<strong>è¯»å†™åˆ†ç¦»ã€‚<strong>ä¸€èˆ¬éƒ½æ˜¯</strong>ä¸€ä¸»å¤šä»</strong>ï¼Œ<strong>ä¸»èŠ‚ç‚¹è´Ÿè´£å†™æ•°æ®</strong>ï¼Œ<strong>ä»èŠ‚ç‚¹è´Ÿè´£è¯»æ•°æ®</strong>ï¼Œä¸»èŠ‚ç‚¹å†™å…¥æ•°æ®ä¹‹åï¼Œéœ€è¦æŠŠæ•°æ®åŒæ­¥åˆ°ä»èŠ‚ç‚¹ä¸­ã€‚</p><p><img src="https://qjw-00.oss-cn-guangzhou.aliyuncs.com/%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8/%E9%9B%86%E7%BE%A4.jpg" alt=""></p><p>ä¸»ä»å…¨é‡åŒæ­¥ã€‚ç›´æ¥çœ‹å›¾å§ã€‚</p><ul><li><strong>å…¨é‡åŒæ­¥ï¼š<strong>slaverå‘å‡ºè¯·æ±‚ï¼Œmasteråˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ä¸ª</strong>é›†ç¾¤id</strong>ï¼ˆæ˜¯å¦ç¬¬ä¸€æ¬¡æ¥æ”¶ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œå°±è¿”å›ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶fokeä¸€ä¸ªç¨‹åºè¿›è¡ŒRDBç”Ÿæˆå’Œä¼ é€’å›å»ã€‚slaveræ¥æ”¶åˆ°ç‰ˆæœ¬åä¿å­˜ï¼Œéšåæ¸…ç©ºæ•°æ®ç”¨RDBåŠ è½½æ•°æ®ã€‚åŒæ—¶åœ¨æ‰§è¡Œä¸Šé¢è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ•°æ®æœ‰æ›´è¡Œï¼ŒmasterèŠ‚ç‚¹ä¼šå‘é€æ‰§è¡ŒæœŸé—´çš„æ—¥å¿—æ–‡ä»¶ç»™slaverï¼Œslaveræ‰§è¡Œä¹‹åä¿æŒåŒæ­¥ã€‚</li><li><strong>å¢é‡åŒæ­¥ï¼š<strong>å¦‚æœæ˜¯ç¬¬äºŒæ¬¡çš„è¯ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹åŒºåˆ«ã€‚slaverå‘å‡ºè¯·æ±‚ï¼Œmasteråˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ä¸ª</strong>é›†ç¾¤id</strong>ï¼Œå‘ç°ä¸æ˜¯ã€‚masterèŠ‚ç‚¹ä¼šå‘é€æ‰§è¡ŒæœŸé—´çš„æ—¥å¿—æ–‡ä»¶ç»™slaverï¼Œslaveræ‰§è¡Œä¹‹åä¿æŒåŒæ­¥ã€‚</li><li>ğŸ’¡ ç¬”è®°:éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯ç¬¬ä¸€æ¬¡çš„ä¸€å¥æ˜¯çœ‹é›†ç¾¤idï¼Œåˆ¤æ–­æ—¥å¿—æ–‡ä»¶çš„å¤šå°‘ç”¨çš„æ˜¯åç§»é‡ã€‚</li></ul><p><img src="https://qjw-00.oss-cn-guangzhou.aliyuncs.com/%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8/%E4%B8%BB%E4%BB%8E%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5.jpg" alt=""></p><h3 id="å“¨å…µæ¨¡å¼">å“¨å…µæ¨¡å¼</h3><p>å“¨å…µçš„æ„æˆï¼š</p><ul><li><p>å“¨å…µä¹Ÿæ˜¯<strong>é›†ç¾¤</strong>çš„ï¼Œè‡³å°‘ä¸‰å°</p><ul><li><strong>ç›‘æ§</strong>ï¼šå“¨å…µsentinelä¼šä¸æ–­çš„æ£€æŸ¥masterå’Œslaveæ˜¯å¦æŒ‰ç…§é¢„æœŸå·¥ä½œ</li><li><strong>è‡ªåŠ¨æ•…éšœæ¢å¤</strong>ï¼šå¦‚æœmasteræ•…éšœï¼Œsentinelä¼šå°†ä¸€ä¸ªslaveå‡çº§ä¸ºmasterï¼Œå½“æ•…éšœæ¢å¤åï¼Œä¹Ÿä»¥æ–°çš„masterä¸ºä¸»ã€‚</li><li><strong>é€šçŸ¥</strong>ï¼šsentinelå……å½“rediså®¢æˆ·ç«¯çš„æœåŠ¡æ¥å‘ç°æºï¼Œå½“é›†ç¾¤å‘ç”Ÿæ•…éšœè½¬ç§»æ—¶ï¼Œä¼šå°†æœ€æ–°æ¶ˆæ¯æ¨é€ç»™rediså®¢æˆ·ç«¯ï¼ˆè¯´äººè¯å°±æ˜¯ä¸éœ€è¦å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œæ•…éšœçš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ†é…masterï¼‰</li></ul></li><li><p><strong>æœåŠ¡çŠ¶æ€ç›‘æ§</strong></p><p>sentinelåŸºäº<strong>å¿ƒè·³æœºåˆ¶</strong>ç›‘æµ‹æœåŠ¡çŠ¶æ€ï¼Œæ¯éš”<strong>1s</strong>å‘é›†ç¾¤çš„æ¯ä¸ªå®ä¾‹å‘ç”Ÿpingå‘½ä»¤ï¼š</p><ul><li>ä¸»è§‚ä¸‹çº¿ï¼šä¸€å°å‘ç°å®ä¾‹æœªåœ¨è§„å®šçš„æ—¶é—´å“åº”</li><li>å®¢è§‚ä¸‹çº¿ï¼šè¶…è¿‡æŒ‡å®šæ•°é‡ï¼ˆquorumï¼‰ï¼ˆä¸€èˆ¬æ˜¯å“¨å…µçš„ä¸€åŠä»¥ä¸Šï¼ˆn/2+1ï¼‰ï¼‰éƒ½è®¤ä¸ºä¸»è§‚ä¸‹çº¿ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºæ˜¯å®¢è§‚ä¸‹çº¿ã€‚</li></ul><p>å½“åˆ¤æ–­ä¸‹çº¿ä¹‹åï¼Œå“¨å…µå°±ä¼šå¼€å§‹æŒ‘é€‰æ–°çš„master</p><ul><li>åˆ¤æ–­ä¸»ä»èŠ‚ç‚¹æ–­å¼€æ—¶é—´çš„é•¿çŸ­ï¼ˆè¶ŠçŸ­è¶Šå¥½ï¼‰ï¼Œè¶…è¿‡æŒ‡å®šæ—¶é—´æ’é™¤</li><li>åˆ¤æ–­ä¼˜å…ˆçº§ï¼ˆslave-priorityï¼‰ï¼Œè¶Šå°è¶Šé«˜</li><li><strong>å¦‚æœä¼˜å…ˆçº§ä¸€è‡´ï¼Œåˆ¤æ–­slaveèŠ‚ç‚¹çš„offsetå€¼ï¼Œè¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆä¹Ÿå°±æ˜¯æ•°æ®è¶Šå¤šè¶Šå¥½ï¼‰</strong></li><li>æœ€ååˆ¤æ–­idè¿è¡Œçš„å¤§å°ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆè¿™ä¸ªæ— æ‰€è°“ï¼‰</li></ul></li><li><p><strong>è„‘è£‚é—®é¢˜</strong></p><p>æ‰€è°“çš„è„‘è£‚ï¼Œå°±æ˜¯å½“å®¢æˆ·ç«¯æ–­ç½‘ä¹‹åï¼ˆå¤„äºä¸åŒçš„ç½‘ç»œåˆ†åŒºï¼‰ï¼Œå“¨å…µpingä¸é€šmasterï¼Œä»¥ä¸ºmasteræŒ‚äº†ï¼Œæ‰€ä»¥æŠŠslaveå‡çº§ä¸ºmasterã€‚ï¼ˆæ­¤æ—¶åŸæ¥çš„masterä¾æ—§å¯ä»¥å†™ï¼‰ï¼Œç­‰ç½‘ç»œæ¢å¤ä¹‹åï¼ŒåŸæ¥çš„masterå°±è¢«å¼ºåˆ¶é™çº§ä¸ºslaveã€‚å¯¼è‡´<strong>æ•°æ®å¯èƒ½ä¸¢å¤±</strong>ã€‚</p><p><strong>è§£å†³åŠæ³•</strong>ï¼š</p><ul><li>min-replicas-write 1 è¡¨ç¤º<strong>æœ€å°‘çš„salveèŠ‚ç‚¹</strong>ä¸º1ä¸ªã€‚</li><li>min-replicas-max-lag 5 è¡¨ç¤º<strong>æ•°æ®å¤åˆ¶å’ŒåŒæ­¥çš„å»¶è¿Ÿ</strong>ä¸è¶…è¿‡5ç§’ã€‚</li><li>è¿™æ ·è®¾ç½®ä¹‹åï¼Œå°±å¯¼è‡´<strong>æ—§çš„master</strong>å†™å…¥è¯·æ±‚çš„æ—¶å€™å› ä¸ºä¸ç¬¦åˆä¸Šè¿°çš„ä¸¤ä¸ªæ¡ä»¶<strong>è¢«æ‹’ç»</strong>ï¼Œå†™å…¥è¯·æ±‚å°±ä¼šåˆ°<strong>æ–°çš„masterä¸Šï¼Œä»è€Œè§£å†³è„‘è£‚çš„é—®é¢˜</strong></li></ul></li></ul><h3 id="åˆ†ç‰‡é›†ç¾¤">åˆ†ç‰‡é›†ç¾¤</h3><p>ä¸»ä»å’Œå“¨å…µå¯ä»¥è§£å†³é«˜å¯ç”¨ã€é«˜å¹¶å‘è¯»çš„é—®é¢˜ã€‚</p><p>ä½†æ˜¯ä¾ç„¶æœ‰ä¸¤ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼š</p><ul><li><strong>æµ·é‡æ•°æ®å­˜å‚¨é—®é¢˜</strong></li><li><strong>é«˜å¹¶å‘å†™çš„é—®é¢˜</strong></li></ul><p>ä½¿ç”¨åˆ†ç‰‡é›†ç¾¤å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œ<strong>åˆ†ç‰‡é›†ç¾¤ç‰¹å¾</strong>ï¼ˆä½œç”¨ï¼‰ï¼š</p><ul><li>é›†ç¾¤ä¸­æœ‰å¤šä¸ªmaster,æ¯ä¸ªmasterfä¿å­˜ä¸åŒæ•°æ®</li><li>æ¯ä¸ªmasteréƒ½å¯ä»¥æœ‰å¤šä¸ªslaveèŠ‚ç‚¹</li><li>masterä¹‹é—´é€šè¿‡pingç›‘æµ‹å½¼æ­¤å¥åº·çŠ¶æ€ï¼ˆä»£æ›¿å“¨å…µï¼‰</li><li>å®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è®¿é—®é›†ç¾¤<strong>ä»»æ„èŠ‚ç‚¹</strong>ï¼Œ<strong>æœ€ç»ˆéƒ½ä¼šè¢«è½¬å‘åˆ°æ­£ç¡®èŠ‚ç‚¹</strong></li></ul><p><strong>Redisåˆ†ç‰‡é›†ç¾¤ä¸­æ•°æ®æ˜¯æ€ä¹ˆå­˜å‚¨å’Œè¯»å–çš„ï¼Ÿ</strong></p><p>Redisåˆ†ç‰‡é›†ç¾¤å¼•å…¥äº†å“ˆå¸Œæ§½çš„æ¦‚å¿µï¼ŒRedisé›†ç¾¤æœ‰<strong>16384</strong>ä¸ªå“ˆå¸Œæ§½ï¼Œæ¯ä¸ªkeyé€šè¿‡CRC16æ ¡éªŒåå¯¹16384å–æ¨¡æ¥<br>å†³å®šæ”¾ç½®å“ªä¸ªæ§½ï¼Œé›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†hashæ§½ã€‚ï¼ˆ<strong>æœ‰æœ‰æ•ˆå€¼çœ‹æœ‰æ•ˆå€¼ï¼Œæ²¡æœ‰çœ‹keyå“ˆå¸Œå€¼ä¸16384å–æ¨¡</strong>ï¼‰</p><h3 id="redisä¸ºä»€ä¹ˆå¿«">redisä¸ºä»€ä¹ˆå¿«</h3><ul><li><p><strong>å› ä¸ºå®ƒæ˜¯å•çº¿ç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„çº¿ç¨‹åˆ‡æ¢å’Œç«äº‰æ¡ä»¶ï¼ŒåŒæ—¶ä¸ç”¨è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜</strong></p></li><li><p><strong>å­˜å†…å­˜æ“ä½œï¼Œæ‰§è¡Œå¿«</strong></p></li><li><p><strong>IOå¤šè·¯å¤ç”¨ï¼Œéé˜»å¡IO</strong>ï¼ˆä¾‹å¦‚bgsaveå’Œbgrewriteaoféƒ½æ˜¯åå°æ‰§è¡Œï¼‰</p><ul><li><p>å†…æ ¸ç©ºé—´å’Œå¤–æ ¸ç©ºé—´</p><ul><li>å†…æ ¸ç©ºé—´ï¼šå‡ ä¹å…·å¤‡æ‰€æœ‰æƒé™çš„ç³»ç»Ÿç©ºé—´</li><li>å¤–æ ¸ç©ºé—´ï¼šç”¨æˆ·çš„æ“ä½œç©ºé—´</li><li>å†…æ ¸ç©ºé—´æ˜¯ä¸­è½¬ç«™ï¼šå¤–æ ¸ç©ºé—´-å†…æ ¸ç©ºé—´-ç¡¬ä»¶</li></ul><p><img src="https://qjw-00.oss-cn-guangzhou.aliyuncs.com/%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8/%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4.jpg" alt=""></p></li><li><p>é˜»å¡IO</p><p>åœ¨ç­‰å¾…æ•°æ®å’Œå‡†å¤‡æ•°æ®çš„è¿‡ç¨‹ä¸­æ˜¯é˜»å¡çš„ï¼Œåœ¨æ‹·è´æ•°æ®çš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯é˜»å¡çš„ã€‚</p></li><li><p>éé˜»å¡IO</p><p>åœ¨ç­‰å¾…æ•°æ®å’Œå‡†å¤‡æ•°æ®çš„è¿‡ç¨‹ä¸­ä¸æ˜¯é˜»å¡çš„ï¼Œåé¢ä¸€æ ·ã€‚ä½†cpuæ¶ˆè€—å¤§</p></li><li><p><strong>IOå¤šè·¯å¤ç”¨</strong></p><p><strong>å•ä¸ªçº¿ç¨‹å¯ä»¥ä¸€æ¬¡æ€§ç›‘å¬å¤šä¸ªsocket</strong>ï¼Œè™½ç„¶ä¸¤ä¸ªéƒ½æ˜¯é˜»å¡ï¼Œä½†æ˜¯ä¸€æ—¦æŸä¸ªsocketå¯è¯»å°±ä¼šé€šçŸ¥ï¼Œé¿å…æ— æ•ˆç­‰å¾…ã€‚<strong>èŠ‚çœcpu</strong>ï¼Œåº•å±‚ç”¨epollå®ç°ï¼Œåœ¨é€šçŸ¥socketå°±ç»ªçš„åŒæ—¶ä¹Ÿé€šçŸ¥æ˜¯å“ªä¸ªsocketã€‚æå‡äº†æ€§èƒ½</p><p>ioå¤šè·¯å¤ç”¨çš„å®ç°æ–¹å¼</p><ul><li><p>select</p></li><li><p>poll</p></li><li><p>epoll</p><p>å‰ä¸¤ä¸ªéƒ½æ˜¯é€šçŸ¥ç³»ç»Ÿä½†æ²¡æœ‰æºå¸¦socketï¼Œéœ€è¦ä¸€ä¸ªä¸ªå»æ‰¾ï¼Œepollåˆ™ä¼šåœ¨é€šçŸ¥ç³»ç»Ÿå°±ç»ªçš„æ—¶å€™æä¾›socketçš„ä¿¡æ¯</p></li></ul></li></ul></li><li><p>Redisç½‘ç»œæ¨¡å‹</p><p>å°±æ˜¯ä½¿ç”¨l/Oå¤šè·¯å¤ç”¨ç»“åˆäº‹ä»¶çš„å¤„ç†å™¨æ¥åº”å¯¹å¤šä¸ªSocketiè¯·æ±‚</p><blockquote><p><strong>è¿æ¥åº”ç­”å¤„ç†å™¨</strong></p><p><strong>å‘½ä»¤å›å¤å¤„ç†å™¨</strong>ï¼Œåœ¨Redis6.0ä¹‹åï¼Œä¸ºäº†æå‡æ›´å¥½çš„æ€§èƒ½ï¼Œä½¿ç”¨äº†å¤šçº¿ç¨‹æ¥å¤„ç†å›å¤äº‹ä»¶<br><strong>å‘½ä»¤è¯·æ±‚å¤„ç†å™¨</strong>ï¼Œåœ¨Rdis6.0ä¹‹åï¼Œå°†å‘½ä»¤çš„è½¬æ¢ä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼Œå¢åŠ å‘½ä»¤è½¬æ¢é€Ÿåº¦ï¼Œåœ¨å‘½ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œä¾ç„¶æ˜¯å•çº¿ç¨‹</p></blockquote></li></ul><p><a href="https://heuqqdmbyk.feishu.cn/wiki/V45ewmbN6i8nm8kNl01c7qClnTc">Redisç¯‡ - é£ä¹¦äº‘æ–‡æ¡£</a></p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•çŸ¥è¯†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å­¦ä¹ è¿‡ç¨‹</tag>
      
      <tag>redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexoéƒ¨ç½²vscode</title>
    <link href="/pingpinghome/2025/07/21/hexo%E9%83%A8%E7%BD%B2vscode/"/>
    <url>/pingpinghome/2025/07/21/hexo%E9%83%A8%E7%BD%B2vscode/</url>
    
    <content type="html"><![CDATA[<h1>hexoéƒ¨ç½²vscode</h1><blockquote><p>ä»Šå¤©ï¼Œå¥½æœ‹å‹æƒ³è¦åŸºäºhexoæ¥æ­å»ºä¸€ä¸ªåšå®¢ï¼Œä½†æ˜¯åœ¨éƒ¨ç½²çš„è¿‡ç¨‹ä¸­å‡ºç°äº†é—®é¢˜ï¼Œä¸€æ—¶é—´æˆ‘ä¹Ÿä¸çŸ¥é“å¦‚ä½•è§£å†³ï¼Œæ‰€ä»¥æˆ‘å°±æŠŠæˆ‘éƒ¨ç½²çš„ç»éªŒå’Œè¿‡ç¨‹å†™ä¸‹æ¥ï¼Œæ–¹ä¾¿ä¹‹åè¿›è¡ŒæŸ¥é˜…å’Œä¿®æ”¹ã€‚</p></blockquote><h2 id="1-å‡†å¤‡">1.å‡†å¤‡</h2><h3 id="1-1å‰æ">1.1å‰æ</h3><p>å½“å‰PCç¯å¢ƒä¸­æœ‰Nodeå’ŒGitã€‚ç‰ˆæœ¬å¯ä»¥å‚è€ƒHexoæ–‡æ¡£ã€‚<br>æ–‡ç« ä¸­å‡ºç°çš„yourusernameä¸ºGithubç”¨æˆ·åï¼Œyour-repoä¸ºä»“åº“åã€‚</p><h3 id="1-2ä½¿ç”¨çš„è½¯ä»¶">1.2ä½¿ç”¨çš„è½¯ä»¶</h3><ul><li><a href="https://hexo.io/zh-cn/">Hexo</a></li><li><a href="https://git-scm.com/">Git</a></li><li><a href="https://github.com/">GitHub</a></li><li><a href="https://code.visualstudio.com/">VSCode</a></li><li><a href="https://markdown.com.cn/">Markdown</a></li></ul><h3 id="1-3æ³¨æ„äº‹é¡¹">1.3æ³¨æ„äº‹é¡¹</h3><ul><li>ç¡®ä¿ä½ å…¨ç¨‹éƒ½æ˜¯ç®¡ç†å‘˜æƒé™</li><li>ç¡®ä¿ä½ å¯ä»¥é“¾æ¥åˆ°GitHub</li><li>ç¡®ä¿ä½ çš„GitHubç”¨æˆ·åã€é‚®ç®±ã€GitHub Pagesçš„åŸŸåå·²ç»è®¾ç½®å¥½</li><li>ä¸Šé¢çš„è½¯ä»¶ä¸‹è½½å¥½</li></ul><h2 id="2-Hexoå®‰è£…">2.Hexoå®‰è£…</h2><h3 id="2-1-å®‰è£…Hexo">2.1 å®‰è£…Hexo</h3><p>å®‰è£…è„šæ‰‹æ¶ï¼Œåˆå§‹åŒ–hexoï¼Œè¿™ä¼šæ–°å»ºblogæ–‡ä»¶å¤¹ï¼Œè¿›å…¥åå®‰è£…ä¾èµ–ã€‚<br>æ‰“å¼€vscodeï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g hexo-cli<br>hexo init blogï¼ˆè¿™ä¸€å¥å¯ä»¥çœç•¥blogï¼‰<br><span class="hljs-built_in">cd</span> blogï¼ˆè¿™ä¸€å¥å¯ä»¥çœç•¥ï¼‰<br>npm install<br></code></pre></td></tr></table></figure><h3 id="2-2-åˆå§‹åŒ–ä»“åº“">2.2 åˆå§‹åŒ–ä»“åº“</h3><p>å¯ä»¥é€‰æ‹©åˆ©ç”¨VSCodeç­‰è½¯ä»¶ç›´æ¥å¯¹é¡¹ç›®å¼€æºåˆ°githubä»“åº“ã€‚<br>ä¹Ÿå¯ä»¥æ‰‹åŠ¨å»githubåˆ›å»ºä¸€ä¸ªç©ºä»“åº“ï¼Œç„¶åæ‰‹åŠ¨åœ¨å‘½ä»¤è¡Œä¸­æ¨é€ã€‚<br>æˆ‘æ˜¯ç›´æ¥ç‚¹å‡»vscodeæœ€ä¸Šé¢çš„è¾“å…¥æ¡†ï¼Œç›´æ¥æ¨é€åˆ°æ–°ä»“åº“è‡ªåŠ¨åˆ›å»ºäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">git init<br>git remote add origin https://github.com/yourusername/your-repo.git<br>git add .<br>git commit -m <span class="hljs-string">&quot;Initial commit&quot;</span><br>git push -u origin main<br></code></pre></td></tr></table></figure><h3 id="2-3-åˆ›å»ºtoken">2.3 åˆ›å»ºtoken</h3><p>åœ¨ä¸ªäººè®¾ç½®ä¸­æ–°å¢ä¸€ä¸ªPersonal access tokensã€‚è‡³å°‘è¦åŒ…å«repoæƒé™ï¼Œç„¶åè®°ä½tokenã€‚<br>è¿™ä¸ªtokenæ˜¯ç»™Github Actionç”¨çš„ï¼ŒGithub Actionä¼šæŠŠHexoç¼–è¯‘éƒ¨ç½²åˆ°gh-pagesåˆ†æ”¯ã€‚<br>å…·ä½“å¯ä»¥æŸ¥çœ‹ç½‘ä¸Šçš„æ•™ç¨‹ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ç”¨äººè¯</p><p>ç‚¹å‡»githubçš„å¤´åƒï¼Œç‚¹å‡»settingsï¼Œæ‰¾åˆ°å¼€å‘è€…è®¾ç½®ï¼Œç‚¹å‡»ä¸ªäººä»¤ç‰Œè®¿é—®ï¼Œç‚¹å‡»ä»¤ç‰Œï¼ˆç»å…¸ï¼‰ï¼Œç„¶åç‚¹å‡»ç”Ÿæˆæ–°ä»¤ç‰Œï¼Œé€‰æ‹©ç»å…¸å°±å¥½ã€‚ä¿å­˜å¥½ä½ çš„tokenï¼Œæ—¶é—´è‡ªå·±è®¾ç½®ã€‚</p><p>è·å–tokenä¹‹åï¼Œè¿”å›hexoçš„ä»“åº“ï¼Œç‚¹å‡»settingï¼Œæ‰¾åˆ°secretsï¼Œç‚¹å‡»Secrets and variablesï¼Œç‚¹å‡»actionï¼Œç‚¹å‡»new repository secretï¼Œè¾“å…¥tokençš„åå­—ï¼ˆè¿™ä¸ªå’Œåé¢ä¿æŒä¸€è‡´ï¼‰ï¼Œè¾“å…¥tokençš„å€¼ï¼Œç„¶åç‚¹å‡»add secretã€‚</p><h3 id="2-4-ä¿®æ”¹-config-yml">2.4 ä¿®æ”¹_config.yml</h3><p>åœ¨_config.ymlä¸­ä¿®æ”¹deployå­—æ®µã€‚æŒ‡ç¤ºHexoåœ¨deployæ—¶çš„æ¨é€åœ°å€ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/yourusername/your-repo.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">gh-pages</span><br></code></pre></td></tr></table></figure><h2 id="3-é…ç½®Github-Actionå·¥ä½œæµ-å¦‚æœä¸éœ€è¦å·¥ä½œæµï¼Œå¯ä»¥ç•¥è¿‡">3 é…ç½®Github Actionå·¥ä½œæµ(å¦‚æœä¸éœ€è¦å·¥ä½œæµï¼Œå¯ä»¥ç•¥è¿‡)</h2><p>åœ¨.githubæ–‡ä»¶å¤¹ä¸‹æ–°å¢workflowsæ–‡ä»¶å¤¹ï¼Œç„¶åæ–°å¢deploy.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚</p><p>é‡Œé¢æœ‰ä¸ªnode-versionè¦å’Œä½ æœ¬åœ°çš„nodeä¸€è‡´ã€‚</p><p>æ­¥éª¤å¤§è‡´æ„æ€å°±æ˜¯ä½¿ç”¨ubuntu-latestä½œä¸ºåŸºç¡€ç¯å¢ƒï¼Œç„¶åå®‰è£…å„ç§ä¾èµ–ï¼Œéšåhexo generateç”Ÿæˆåšå®¢ç½‘ç«™é™æ€æ–‡ä»¶å¤¹ï¼Œ<br>æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹æ¨é€åˆ°åŒä¸€ä»“åº“çš„gh-pagesåˆ†æ”¯ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">Hexo</span> <span class="hljs-string">to</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span><br><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>  <span class="hljs-comment"># å½“æ¨é€åˆ° main åˆ†æ”¯æ—¶è§¦å‘</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">build:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">repository</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">submodules:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># ç¦ç”¨å­æ¨¡å—æ£€æŸ¥</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node.js</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-string">&#x27;18&#x27;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">Dependencies</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">Hexo</span> <span class="hljs-string">Git</span> <span class="hljs-string">Deployer</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          npm install hexo-deployer-git --save</span><br><span class="hljs-string">          npm install hexo-cli -g</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Clean</span> <span class="hljs-string">and</span> <span class="hljs-string">Generate</span> <span class="hljs-string">Static</span> <span class="hljs-string">Files</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          hexo clean</span><br><span class="hljs-string">          hexo generate</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configure</span> <span class="hljs-string">Git</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          git config --global user.name &#x27;github-actions[bot]&#x27;</span><br><span class="hljs-string">          git config --global user.email &#x27;github-actions[bot]@users.noreply.github.com&#x27;</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span><br>        <span class="hljs-attr">env:</span><br>          <span class="hljs-attr">GH_TOKEN:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.GH_TOKEN</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          cd public/</span><br><span class="hljs-string">          git init</span><br><span class="hljs-string">          git add -A</span><br><span class="hljs-string">          git commit -m &quot;Create by workflows&quot;</span><br><span class="hljs-string">          git remote add origin https://$&#123;&#123; secrets.GH_TOKEN &#125;&#125;@github.com/yourusername/your-repo.git</span><br><span class="hljs-string">          git push origin HEAD:gh-pages -f</span><br></code></pre></td></tr></table></figure><h3 id="3-1-æ¨é€éªŒè¯ï¼ˆå¦‚æœä¸éœ€è¦å·¥ä½œæµï¼Œå¯ä»¥ç•¥è¿‡ï¼‰">3.1 æ¨é€éªŒè¯ï¼ˆå¦‚æœä¸éœ€è¦å·¥ä½œæµï¼Œå¯ä»¥ç•¥è¿‡ï¼‰</h3><p>æŠŠåˆšæ‰æ›´æ–°çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ¨é€ä¸€éï¼Œgithubå°±ä¼šè§¦å‘å·¥ä½œæµï¼Œç„¶åå»ç½‘ç«™çœ‹å·¥ä½œæµè¿è½¬çš„å¦‚ä½•ã€‚<br>ç­‰ä¸€åˆ‡è¿è½¬å®Œæ¯•ï¼Œå°±ä¼šå‘ç°ä»“åº“å¤šå‡ºä¸€ä¸ªgh-pagesåˆ†æ”¯ã€‚</p><h3 id="3-2-é…ç½®Github-Pages">3.2 é…ç½®Github Pages</h3><p>åœ¨ä»“åº“settingsä¸­é…ç½®pageæ¥æºä¸ºgh-pagesåˆ†æ”¯å³å¯ã€‚ç­‰å¾…ç½‘ç«™éƒ¨ç½²å®Œæ¯•ï¼Œå°±å¯ä»¥çœ‹äº†ã€‚ç½‘ç«™é“¾æ¥å¯ä»¥åœ¨settingsçš„<strong>GitHub Pages</strong>çœ‹åˆ°ï¼Œä¹Ÿå¯ä»¥å»actioné‡Œçœ‹åˆ°ã€‚</p><h2 id="4-ä¿®æ”¹Hexoä¸»é¢˜æ ·å¼">4. ä¿®æ”¹Hexoä¸»é¢˜æ ·å¼</h2><p>åœ¨hexoä¸­æ‰¾åˆ°ä½ éœ€è¦çš„ä¸»é¢˜ï¼Œç„¶åæŒ‰ç…§ä¸»é¢˜ä¿®æ”¹å³å¯ã€‚<br>æˆ‘æ”¾ä¸€ä¸ªé“¾æ¥ï¼Œè¿™é‡Œå¯ä»¥æ‰¾åˆ°å¾ˆå¤šä¸»é¢˜ã€‚<br><a href="https://hexo.io/themes/">Hexoä¸»é¢˜</a></p><h2 id="5-é…ç½®æ·»åŠ æ–‡ç« ">5. é…ç½®æ·»åŠ æ–‡ç« </h2><h3 id="5-1æ¨èç”¨vscodæ’ä»¶">5.1æ¨èç”¨vscodæ’ä»¶</h3><p><strong>vscode-hexoå’ŒHexo Utils</strong></p><h3 id="5-2-åˆ›å»ºæ–‡ç« ">5.2 åˆ›å»ºæ–‡ç« </h3><p>ä½ å¯ä»¥æ‰§è¡Œä¸‹åˆ—å‘½ä»¤æ¥åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« æˆ–è€…æ–°çš„é¡µé¢ã€‚</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">$ hexo <span class="hljs-keyword">new</span> [layout] &lt;<span class="hljs-built_in">title</span>&gt;<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥åœ¨å‘½ä»¤ä¸­æŒ‡å®šæ–‡ç« çš„å¸ƒå±€ï¼ˆlayoutï¼‰ï¼Œé»˜è®¤ä¸º postï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ _config.yml ä¸­çš„ default_layout å‚æ•°æ¥æŒ‡å®šé»˜è®¤å¸ƒå±€ã€‚</p><p>æ–‡ç« æ·»åŠ ç¼–è¾‘åï¼Œç°åœ¨åªéœ€è¦æ¨é€åˆ°ä»“åº“ï¼Œé‚£ä¹ˆgithubä¸ä»…ä¼šä¿å­˜ä½ çš„Hexoä¸ªäººåšå®¢æºç ï¼Œè¿˜ä¼šè‡ªåŠ¨æ›´æ–°ä¸ªäººåšå®¢é™æ€é¡µé¢åˆ°gh-pagesï¼Œç”±æ­¤è§¦å‘github-pageåŠŸèƒ½æ¥æ›´æ–°ä½ çš„ä¸ªäººåšå®¢ç½‘ç«™ã€‚</p><h2 id="6-é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•">6. é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•</h2><h3 id="6-1-ç½‘ç«™æ²¡æœ‰æ ·å¼é—®é¢˜">6.1. ç½‘ç«™æ²¡æœ‰æ ·å¼é—®é¢˜</h3><p>åœ¨ç½‘ç«™æ‰“å¼€F12ï¼Œå‘ç°cssç­‰æ ·å¼èµ„æºæ— æ³•åŠ è½½ï¼Œä»”ç»†æŸ¥çœ‹æŠ¥é”™åŸå› å’Œè¯·æ±‚åœ°å€ï¼Œå‘ç°å¹¶ä¸æ˜¯å½“å‰ä»“åº“ã€‚</p><p>ç¼ºå°‘ä»“åº“åœ°å€ï¼Œæ‰€ä»¥æŠŠè¯·æ±‚åœ°å€å¤åˆ¶ä¸€ä»½ï¼Œå¹¶åœ¨åé¢æ·»åŠ ä¸Šä»“åº“åå³å¯ï¼Œè¿™éœ€è¦ä¿®æ”¹_config.ymlä¸­ä¿®æ”¹urlå­—æ®µã€‚yourusernameä¼¼ä¹ä¸ºå°å†™ã€‚</p><p>æ¨é€åç­‰å¾…å·¥ä½œæµæ‰§è¡Œï¼ŒæŸ¥çœ‹ç»“æœã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">url:</span> <span class="hljs-string">https://yourusername.github.io/your-repo</span><br><span class="hljs-attr">root:</span> <span class="hljs-string">/your-repo/</span><br></code></pre></td></tr></table></figure><h3 id="6-2-å›¾ç‰‡ä¸æ˜¾ç¤º">6.2. å›¾ç‰‡ä¸æ˜¾ç¤º</h3><p>åœ¨_config.ymlä¸­è®¾ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">post_asset_folder:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>æ„æ€æ˜¯æ¯ä¸ªmdåšæ–‡ä¼šå•ç‹¬é…å¥—ä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾å›¾ç‰‡ã€‚å½¢å¦‚</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">source</span><span class="hljs-regexp">/_posts/</span><br>â”œâ”€â”€ my-<span class="hljs-keyword">new</span>-post.md<br>â””â”€â”€ my-<span class="hljs-keyword">new</span>-post/<br>    â””â”€â”€ example.jpg<br></code></pre></td></tr></table></figure><p>hexoæä¾›ä¸‰ç§è¯­æ³•</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name">asset_path</span> slug %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name">asset_img</span> slug [title] %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name">asset_link</span> slug [title] %&#125;</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆåœ¨mdä¸­å¯ä»¥è¿™æ ·å¼•ç”¨å›¾ç‰‡</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">&#123;<span class="hljs-symbol">%</span> asset_img <span class="hljs-built_in">example</span>.jpg This <span class="hljs-built_in">is</span> an <span class="hljs-built_in">example</span> <span class="hljs-built_in">image</span> <span class="hljs-symbol">%</span>&#125;<br></code></pre></td></tr></table></figure><p>å…·ä½“çš„å¯ä»¥çœ‹è¿™ä¸ª<a href="https://hexo.io/zh-cn/docs/index.html">Hexoæ–‡æ¡£</a></p><p>è¿™æ ·ä¸€æ¥ï¼Œéƒ¨ç½²çš„æ—¶å€™å›¾ç‰‡å°±ä¸ä¼šä¸æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯æœ‰ä¸ªæ–°çš„é—®é¢˜ï¼Œ<br>æˆ‘åœ¨æœ¬åœ°ç¼–è¾‘mdçš„æ—¶å€™æ— æ³•é¢„è§ˆå›¾ç‰‡æ€ä¹ˆåŠã€‚</p><p>å»ºè®®ç”¨VSCodeä¸‹è½½æ’ä»¶vscode-hexoå’ŒHexo Utilsï¼Œéšååœ¨å·¦è¾¹æ ç›®å°±å¯ä»¥çœ‹åˆ°æ–°Hexo Utilsçš„æ–°èœå•ï¼Œåªè¦ä½ çš„VSCodeå½“å‰æ‰“å¼€çš„æ–‡ä»¶å¤¹æ˜¯hexoçš„æ ¹ç›®å½•ï¼Œé‚£ä¹ˆæ’ä»¶å°±ä¼šè‡ªåŠ¨è¯†åˆ«åˆ°ï¼Œå½“ä½ å¯¹mdæ–‡ä»¶ä½¿ç”¨â€œä¾§è¾¹é¢„è§ˆâ€æ—¶ï¼Œå›¾ç‰‡å°±æ­£å¸¸æ˜¾ç¤ºäº†ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javaå…¥é—¨</title>
    <link href="/pingpinghome/2024/07/20/java%E5%85%A5%E9%97%A8/"/>
    <url>/pingpinghome/2024/07/20/java%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1>1. javaå…¥é—¨</h1><h2 id="2-javaåŸºç¡€ï¼ˆä¸¤ä¸ªæœˆï¼‰">2. javaåŸºç¡€ï¼ˆä¸¤ä¸ªæœˆï¼‰</h2><p>å¯¹äºjavaå…¥é—¨ï¼Œæˆ‘è¿™é‡Œä¸»è¦ä»‹ç»ä¸€äº›javaçš„è¯­æ³•ï¼Œä»¥åŠä¸€äº›javaçš„å¸¸ç”¨ç±»ã€‚<br>ä¸»è¦å­¦ä¹ çš„è·¯å¾„ï¼šé»‘é©¬ç¨‹åºå‘˜JavaåŸºç¡€<a href="https://www.bilibili.com/video/BV17F411T7Ao/?spm_id_from=333.337.search-card.all.click&amp;vd_source=05a13de36acabb86d2e8a4290b817d96">è§†é¢‘é“¾æ¥</a><br>å›æƒ³èµ·æ¥ï¼Œå¤§æ¦‚å­¦äº†æœ‰ä¸¤ä¸ªæœˆï¼ŒåŸºç¡€å¾ˆé‡è¦ï¼Œä¸€å¼€å§‹å¾ˆéš¾ï¼Œæ€»è§‰å¾—å“ªå“ªéƒ½ä¸æ‡‚ï¼Œä½†è¶Šå­¦è¶Šå¿«ï¼ŒåŸºç¡€è¶Šå¥½ï¼Œä¹‹åå­¦ä¹ å…¶ä»–çš„è¯­è¨€å’ŒæŠ€æœ¯å°±éƒ½å¾ˆç®€å•ã€‚</p><h2 id="3-javawebï¼ˆä¸€ä¸ªåŠæœˆï¼‰">3. javawebï¼ˆä¸€ä¸ªåŠæœˆï¼‰</h2><p>å¯¹ä¸javawebæ¥è¯´ï¼Œæˆ‘æ„Ÿè§‰æ˜¯ä¸€ä¸ªé˜¶æ®µæ€§çš„æå‡ï¼Œåœ¨å­¦ä¹ javawebä¹‹å‰ï¼Œåªèƒ½ç”¨javaè¿›è¡Œä¸€äº›ç®€å•çš„ï¼Œçº¯ä»£ç çš„æˆç»©ç®¡ç†ç³»ç»Ÿï¼Œè¿™ç§æ— æ³•ç›´æ¥ä½¿ç”¨çš„ä¸œè¥¿ï¼›<br>è™½ç„¶è¿™æ ·ä¹Ÿè®©å­¦ä¹ æ²¡æœ‰é‚£ä¹ˆæ¯ç‡¥ï¼Œä½†ç»ˆç©¶ä¼šè§‰å¾—æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚</p><p>åªæœ‰å­¦ä¹ åˆ°javawebä¹‹åï¼Œæˆ‘æ‰å¯ä»¥è¯´ï¼Œjavaç¡®å®æ˜¯æœ‰è¶£çš„ã€‚<br>å­¦çš„æ¯ä¸€ä¸ªç”¨æ³•éƒ½å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°åº•å±‚åŸç†ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå·±è¿›è¡Œä¸€äº›ç®€å•çš„é¡¹ç›®ï¼Œæ¯”å¦‚ï¼Œä¸€ä¸ªç®€å•çš„æˆç»©ç®¡ç†ç³»ç»Ÿï¼Œä¸€ä¸ªç®€å•çš„ç•™è¨€æ¿ç­‰ç­‰ã€‚</p><p>ä¸»è¦å­¦ä¹ è·¯å¾„ï¼šé»‘é©¬ç¨‹åºå‘˜Javaweb<a href="https://www.bilibili.com/video/BV1yGydYEE3H/?vd_source=05a13de36acabb86d2e8a4290b817d96">è§†é¢‘é“¾æ¥</a></p><p>å¬è¯´ä»–ä»¬æœ€è¿‘å‡ºäº†ä¸€ä¸ªaiç‰ˆæœ¬çš„ï¼Œæˆ‘æ²¡æœ‰å»äº†è§£ã€‚å› ä¸ºæˆ‘è§‰å¾—å­¦ä¹ é˜¶æ®µï¼Œè¿˜æ˜¯è„šè¸å®åœ°çš„å¥½ï¼Œç›´æ¥ä¸Šaiï¼Œå¾ˆå¤šä¸œè¥¿ä½ æ²¡æœ‰äº²è‡ªå»åšï¼Œå°±å¾ˆå®¹æ˜“å¿˜è®°ï¼Œç”šè‡³æ²¡äº†aiï¼Œä½ éƒ½ä¸çŸ¥é“å¦‚ä½•å¼€å‘ã€‚æˆ‘è®¤ä¸ºï¼Œè¿™æ˜¯è‡´å‘½çš„ã€‚</p><p><strong>aiæ˜¯è¾…åŠ©ï¼Œä½†ä¸èƒ½æ˜¯å…¨éƒ¨ã€‚</strong></p><p>äº‹å®ä¸Šï¼Œç­‰æˆ‘å­¦å®Œäº†å•ä½“é¡¹ç›®ä¹‹åï¼Œæˆ‘ä¹Ÿä¼šç”¨ä¸€ç‚¹aiï¼Œæ¥å¯¹è‡ªå·±çš„ä»£ç è¿›è¡Œä¼˜åŒ–å’Œæç¤ºï¼Œä½†æˆ‘ä¸€èˆ¬éƒ½ä¸å–œæ¬¢ç›´æ¥ç”¨aiå¼€å‘ã€‚æ€è·¯ä¸åŒå¯ä»¥è§£å†³ï¼Œä½†æ˜¯ä»£ç é£æ ¼ï¼Œä»£ç çš„è§„èŒƒï¼Œä»£ç çš„é€»è¾‘ä¼šå’Œä½ è‡ªå·±æƒ³çš„æœ‰å‡ºå…¥ã€‚è¿™è®©å¼€å‘è¿‡ç¨‹æœ‰äº›ç£•ç£•ç¢°ç¢°ï¼Œå…·ä½“çœ‹ä½ ä»¬å–œä¸å–œæ¬¢äº†ã€‚<br>ä¹‹åæˆ‘ä¹Ÿæƒ³ç»™è‡ªå·±çš„åšå®¢åŠ ä¸€ç‚¹aiï¼Œè¯•è¯•èƒ½ä¸èƒ½å®ç°ä¸€äº›ç®€å•çš„åŠŸèƒ½ã€‚æ¯”å¦‚aiæ€»ç»“æ–‡ç« ï¼Œaiç¿»è¯‘å’Œæœç´¢ç­‰ã€‚</p><h2 id="4-å•ä½“é¡¹ç›®ï¼ˆç›´åˆ°ç›®å‰ï¼‰">4. å•ä½“é¡¹ç›®ï¼ˆç›´åˆ°ç›®å‰ï¼‰</h2><p>å¯¹äºå•ä½“é¡¹ç›®ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åŸºäºä¹‹å‰å­¦ä¹ çš„çŸ¥è¯†ï¼Œå¼€å§‹åˆ©ç”¨æ¡†æ¶å’Œä¸€äº›ç»„ä»¶ï¼ŒçœŸæ­£çš„å¼€å§‹å¼€å‘ä¸€ä¸ªè½¯ä»¶å’Œç½‘ç«™ã€‚å…·ä½“æ¥è¯´å‘¢ï¼ŒåŸºç¡€å·²ç»æ‰å®ï¼Œå¼€å§‹å­¦ä¹ å¯¹æ¥ç°ä»£æŠ€æœ¯äº†ã€‚å¦‚ï¼šspringbootã€mybatisã€jwtã€redisã€elementã€axiosã€ossã€typescriptã€mysqlç­‰ã€‚å­¦ä¹ åç«¯çš„ï¼Œåœ¨è¿™é‡Œä¹Ÿå¼€å§‹æ¥è§¦å‰ç«¯ï¼Œæˆ‘çš„å‰ç«¯ä¹Ÿæ˜¯åœ¨è¿™ä¸ªæ—¶å€™å¼€å§‹æ¥è§¦çš„ï¼Œå¾®ä¿¡å°ç¨‹åºä¹Ÿæ˜¯åœ¨è¿™ä¸ªé˜¶æ®µå¼€å§‹æ¥è§¦ã€‚</p><p>é™¤å¼€å­¦æ ¡çš„é¡¹ç›®å’Œè¯¾ç¨‹ï¼Œæˆ‘ç›®å‰æ­£åœ¨å­¦ä¹ ä¸€äº›æ–°çš„æŠ€æœ¯ï¼Œæ¯”å¦‚ï¼švue3ã€springBootã€mybatisã€jwtã€redisã€elementã€axiosã€nodejsã€typescriptã€mysqlã€å¾®ä¿¡å°ç¨‹åºç­‰ã€‚è¿™äº›éƒ½å·²ç»å¯ä»¥ç†Ÿç»ƒçš„ä½¿ç”¨ï¼ŒåŒºåˆ«åœ¨äºï¼Œç”¨çš„å¤šä¸å¤šã€‚</p><p>è¿™ä¸ªé˜¶æ®µæˆ‘è®¤ä¸ºæ˜¯æœ€æœ‰æ„æ€çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¹Ÿæ˜¯åœ¨è¿™ä¸ªé˜¶æ®µä¹‹åï¼Œæˆ‘è®¤ä¸ºæˆ‘å·²ç»å…¥é—¨äº†å¾ˆå¤šä¸œè¥¿äº†ã€‚ä¹Ÿæ˜¯åœ¨è¿™ä¹‹åï¼Œæˆ‘æ‰æœ‰äº†å®ä¹ çš„æƒ³æ³•ã€‚å› ä¸ºå¤–é¢çš„çŸ¥è¯†å·²ç»æ²¡æœ‰å¤šå°‘æ–°çš„äº†ï¼Œéœ€è¦è¿›å…¥å…¬å¸æ‰å¯ä»¥æ›´è¿›ä¸€æ­¥ã€‚</p><p>å­¦å®Œè¿™äº›ï¼Œå…¶å®å·²ç»å¯ä»¥å¼€å§‹æ‰¾å®ä¹ äº†ï¼Œå› ä¸ºè·¯å°±åœ¨é‚£é‡Œã€‚</p><p>é“¾æ¥å°±ä¸è´´äº†ï¼Œå› ä¸ºåœ¨è¿™é‡Œå¼€å§‹ï¼Œå­¦çš„ä¸œè¥¿éƒ½æ˜¯æŒ‰ç…§å…´è¶£æ¥çš„ã€‚ä»€ä¹ˆé»‘é©¬ï¼Œå°šç¡…è°·ï¼Œèœé¸Ÿï¼Œå®˜æ–¹æ–‡æ¡£ç­‰å¾…ï¼Œæœ‰å…´è¶£å°±å»å­¦ï¼Œæ²¡å…´è¶£æˆ‘è´´ä¸€ç™¾ä¸ªé“¾æ¥éƒ½æ²¡æœ‰ç”¨ã€‚</p><p>æœ€åè¯´ä¸€äº›ç®€å•çš„è¯ï¼Œè¿™ä¸€è¡Œæˆ‘è¿˜æ²¡æœ‰å…¥è¡Œï¼Œå¾ˆå¤šè¯éƒ½åªèƒ½å¬å¬ï¼Œæˆ‘åªæ˜¯åšä¸€ä¸ªåˆ†äº«ï¼Œä¹‹åè‹¥æ˜¯å…¥èŒï¼Œä¼šæ›´æ–°æˆ‘çš„åšå®¢ã€‚</p><p>2025-03-20 19:08:41</p>]]></content>
    
    
    <categories>
      
      <category>é˜¶æ®µæ€»ç»“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å­¦ä¹ è¿‡ç¨‹</tag>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
